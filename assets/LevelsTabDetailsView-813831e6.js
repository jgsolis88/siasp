import{d as x,r as s,i as C,q as n,j as L,w as N,T as S,o as r,c as u,b as e,t as _,g as h,n as q,u as b,k as c,z as B}from"./index-675e3599.js";import{s as M}from"./scrollHelper-62f64ba1.js";import{u as z}from"./useLevelsTab-3324bdb3.js";import{d as D}from"./levelTab-e2bcf003.js";import{u as E}from"./useFormValidation-6eda1048.js";import{v as F,a as I}from"./validationHelper-22c07218.js";import"./api-6055b01b.js";import"./paginationHelper-8171a740.js";const R={clave:{rules:[{validation:i=>F(i),message:"La clave es obligatorio."},{validation:i=>I(i,1),message:"La clave requiere al menos un caracter."}]},clave_tabulador:{rules:[]}},U={key:0},j={class:"view-name"},A=e("hr",{class:"red"},null,-1),G={class:"p-4"},H={key:0,class:"form-group"},J=e("label",{for:"nombre-nivel"},"Clave",-1),K={key:0,id:"nombre-nivel-small",class:"form-text text-muted app-validation"},O={class:"form-group"},P=e("label",null,"Tabulador",-1),Q=e("option",{value:"0",selected:""},"Seleccione una opciÃ³n",-1),W=[Q],X={key:1,class:"form-text text-muted app-form-message"},se=x({__name:"LevelsTabDetailsView",setup(i){const f=s("Registrar Nivel por Tabulador"),{updateLevelsTab:T,getLevelTab:g,saveLevelsTab:y}=z(),l=s(""),d=s(!1),o=s(!1),a=s({...D}),{isValid:V,errors:v}=E(a.value,R),k=()=>{n.push({name:"listar-niveles-tabulador"})},w=()=>{V.value&&(l.value?T(l.value,{...a.value}).then(()=>{n.push({name:"listar-niveles-tabulador"})}).catch(()=>{o.value=!0,setTimeout(()=>{o.value=!1},3e3)}):y({...a.value}).then(()=>{n.push({name:"listar-niveles-tabulador"})}).catch(()=>{o.value=!0,setTimeout(()=>{o.value=!1},3e3)}))};return C(()=>{var m;l.value=(m=n.currentRoute.value.params.id)==null?void 0:m.toString(),l.value?(f.value="Actualizar Nivel por Tabulador",g(l.value).then(t=>{a.value.clave=t.clave,a.value.id_tabulador=t.id_tabulador,d.value=!0})):d.value=!0,M()}),(m,t)=>(r(),L(S,{name:"view"},{default:N(()=>[d.value?(r(),u("div",U,[e("h4",j,_(f.value),1),A,e("form",G,[l.value?c("",!0):(r(),u("div",H,[J,h(e("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=p=>a.value.clave=p),class:"form-control",id:"nombre-nivel",placeholder:"Introduzca el nombre del nivel",autocomplete:"off"},null,512),[[q,a.value.clave]]),b(v)&&b(v).clave?(r(),u("small",K,_(b(v).clave),1)):c("",!0)])),e("div",O,[P,h(e("select",{class:"form-select form-control","onUpdate:modelValue":t[1]||(t[1]=p=>a.value.id_tabulador=p)},W,512),[[B,a.value.id_tabulador]])]),e("div",{class:"modal-footer"},[e("button",{type:"button",class:"btn btn-secondary",onClick:k}," Cancelar "),e("button",{type:"button",onClick:w,class:"btn btn-primary"}," Guardar ")]),o.value?(r(),u("small",X," Verifique que los datos esten correctos, o no haya sido registrado previamiente. ")):c("",!0)])])):c("",!0)]),_:1}))}});export{se as default};
