import{r as n,C as y,i as b}from"./index-7b270076.js";const R=(r,t)=>{const a=n(!1),o=n({}),i=n({}),k=()=>{const s=Object.keys(t);for(let e of s){if(i.value[e]&&!r[e])continue;i.value[e]=!1;const u=t[e].rules;for(let c of u)if(c.validation(r[e])){const l={...o.value};delete l[e],o.value=l}else{const l={...o.value};l[e]=c.message,o.value={...l};break}}a.value=v()},v=()=>{let s=!0;const e=Object.keys(t);for(let u of e){const c=t[u].rules;for(let f of c)f.validation(r[u])||(s=!1)}return s},d=()=>{const s=Object.keys(t);for(let e of s)i.value[e]=!0};return y(r,()=>{k()}),b(()=>{d()}),{isValid:a,errors:o}};export{R as u};
