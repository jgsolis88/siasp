import{d as E,r as u,i as j,q as p,j as C,w as T,T as q,o as r,c as m,b as e,t as v,g as h,n as b,u as i,k as d,z as B}from"./index-1e327b80.js";import{s as G}from"./scrollHelper-62f64ba1.js";import{u as I}from"./useMajorMedicalExpenses-86510035.js";import{u as S}from"./useFormValidation-27ff36c1.js";import{d as z}from"./majorMedicalExpenseModel-998ddec9.js";import"./api-db4911ba.js";import"./paginationHelper-8171a740.js";const D={fecha_vigencia:{rules:[{validation:s=>s&&s.length>0,message:"La fecha de vigencia es requerida."}]},id_grupo:{rules:[{validation:s=>s&&s>0,message:"El ID de grupo es requerido."}]},prima_trimestral:{rules:[{validation:s=>s&&s!=0,message:"La prima trimestral es requerida."}]}},P={key:0},F={class:"view-name"},N=e("hr",{class:"red"},null,-1),U={class:"p-4"},L={class:"form-group"},R=e("label",{for:"nombre-operacion"},"Fecha Vigencia",-1),A={key:0,id:"name-nivel-small",class:"form-text text-muted app-validation"},H={class:"form-group"},J=e("label",null,"Grupo",-1),K=e("option",{value:""},"Seleccione una opciÃ³n",-1),O=e("option",{value:"1"},"Grupo de Prueba",-1),Q=[K,O],W={key:0,id:"descripcion-nivel-small",class:"form-text text-muted app-validation"},X={class:"form-group"},Y=e("label",{for:"nombre-operacion"},"Prima Trimestral",-1),Z={key:0,id:"name-nivel-small",class:"form-text text-muted app-validation"},$={key:0,class:"form-text text-muted app-form-message"},le=E({__name:"MajorMedicalExpenseDetailsView",setup(s){const g=u("Registrar Prima de Gastos Medicos Mayores"),{saveMajorMedicalExpense:x,updateMajorMedicalExpense:y,getMajorMedicalExpenseById:M}=I(),l=u(""),_=u(!1),n=u(!1),a=u({...z}),{isValid:k,errors:o}=S(a.value,D),V=()=>{p.push({name:"listar-primas-gastos-medicos-mayores"})},w=()=>{k.value&&(l.value?y(l.value,{...a.value}).then(()=>{p.push({name:"listar-primas-gastos-medicos-mayores"})}).catch(()=>{n.value=!0,setTimeout(()=>{n.value=!1},3e3)}):x({...a.value}).then(()=>{p.push({name:"listar-primas-gastos-medicos-mayores"})}).catch(()=>{n.value=!0,setTimeout(()=>{n.value=!1},3e3)}))};return j(()=>{var f;l.value=(f=p.currentRoute.value.params.id)==null?void 0:f.toString(),l.value?(g.value="Actualizar Prima de Gastos Medicos Mayores",M(l.value).then(t=>{a.value.fecha_vigencia=t.fecha_vigencia,a.value.id_grupo=t.id_grupo,a.value.prima_trimestral=t.prima_trimestral,a.value.clave=t.clave,_.value=!0})):_.value=!0,G()}),(f,t)=>(r(),C(q,{name:"view"},{default:T(()=>[_.value?(r(),m("div",P,[e("h4",F,v(g.value),1),N,e("form",U,[e("div",L,[R,h(e("input",{type:"date","onUpdate:modelValue":t[0]||(t[0]=c=>a.value.fecha_vigencia=c),class:"form-control",id:"name-bank",placeholder:"Introduzca el nombre",autocomplete:"off"},null,512),[[b,a.value.fecha_vigencia]]),i(o)&&i(o).fecha_vigencia?(r(),m("small",A,v(i(o).fecha_vigencia),1)):d("",!0)]),e("div",H,[J,h(e("select",{class:"form-select form-control","onUpdate:modelValue":t[1]||(t[1]=c=>a.value.id_grupo=c)},Q,512),[[B,a.value.id_grupo]]),i(o)&&i(o).id_grupo?(r(),m("small",W,v(i(o).id_grupo),1)):d("",!0)]),e("div",X,[Y,h(e("input",{type:"text","onUpdate:modelValue":t[2]||(t[2]=c=>a.value.prima_trimestral=c),class:"form-control",id:"name-bank",placeholder:"Introduzca la prima trimestral",autocomplete:"off"},null,512),[[b,a.value.prima_trimestral]]),i(o)&&i(o).prima_trimestral?(r(),m("small",Z,v(i(o).prima_trimestral),1)):d("",!0)]),e("div",{class:"modal-footer"},[e("button",{type:"button",class:"btn btn-secondary",onClick:V}," Cancelar "),e("button",{type:"button",onClick:w,class:"btn btn-primary"}," Guardar ")]),n.value?(r(),m("small",$," Verifique que los datos esten correctos, o no haya sido registrado previamiente. ")):d("",!0)])])):d("",!0)]),_:1}))}});export{le as default};
