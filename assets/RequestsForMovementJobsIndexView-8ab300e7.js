import{r as i,d as F,i as I,a as J,j as E,w as p,T as N,o as f,c as k,b as e,t as z,e as r,u as m,g as A,n as P,k as R,q as g,p as j,h as $,_ as L}from"./index-675e3599.js";import{u as G}from"./useRequestsForMovementJobs-d1e226bd.js";import{D as H}from"./DataTableComponent-36f5eec6.js";import{B as K}from"./ButtonBarComponent-42a2f22c.js";import{g as Q,b as W}from"./api-6055b01b.js";import{u as X}from"./useUnits-3f386980.js";import{_ as Y,N as x}from"./NoOptionsComponent-06eee6fc.js";import{C as Z,p as ee}from"./paginationHelper-8171a740.js";const te="cat_rh_estatus/",oe=()=>{const t=i({...Z});return{statusRh:t,searchEstatusRh:async(d="",u=1,v=!1,h=!0)=>{try{t.value.loading=!0;const a=await Q(`${te}`,{page:u,search:d,page_size:t.value.pagination.page_size,paginate:h,tabla:"Sol_Afectacion"},v);return t.value.data=a.results,t.value.pagination=ee(t.value.pagination,u,a.count),t.value.loading=!1,Promise.resolve(a.results)}catch(a){return console.error(a),console.log("Error al estatus rh",a),Promise.reject(a)}}}},se=oe,ae=t=>t.unidad!==""&&t.unidad!==null||t.estatus!==""&&t.estatus!==null||t.anio!==""&&t.anio!==null,b=t=>(j("data-v-4b9d9562"),t=t(),$(),t),ne={key:0},le=b(()=>e("hr",{class:"red"},null,-1)),ie={class:"row app-options-bar"},re={class:"col-12 buttons-component"},ue={class:"requests-bar"},ce=b(()=>e("h5",null,"Criterios de Búsqueda",-1)),de={class:"row m-0"},pe={class:"col-3 p-0 buttons-component"},me={class:"col-3"},ve={class:"col-2"},he=b(()=>e("div",{class:"col-2"},[e("ul",{class:"navbar-nav"},[e("li",{class:"nav-item dropdown"},[e("button",{class:"btn btn-primary dropdown-toggle active w-100",role:"button","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"}," Opciones "),e("ul",{class:"dropdown-menu catalogue-dropdown"},[e("li",null,[e("button",{class:"dropdown-item"}," Enviar ")]),e("li",null,[e("button",{class:"dropdown-item"}," Movimientos ")]),e("li",null,[e("button",{class:"dropdown-item"}," Consultar ")]),e("li",null,[e("button",{class:"dropdown-item"}," Validar ")])])])])],-1)),_e="Solicitudes de Movimiento de Plazas",fe=F({__name:"RequestsForMovementJobsIndexView",setup(t){const{requestsForMovementJobs:c,getRequestsForMovementJobs:d,searchRequestsForMovementJobs:u}=G(),{searchEstatusRh:v}=se(),h=i(""),a=i(!1),w=i([]),_=i(!1),S=i([]),y=i(""),n=i({unidad:null,estatus:null,anio:""}),{searchUnits:q}=X(),C=()=>g.push({name:"crear-solicitud-de-movimiento-de-plaza"}),M=o=>g.push({name:"editar-solicitud-de-movimiento-de-plaza",params:{id:o}}),O=o=>g.push({name:"eliminar-solicitud-de-movimiento-de-plaza",params:{id:o}}),T=o=>{ae(n.value)?u(h.value,o,n.value):d({page:o})},U=()=>{u(y.value,1,n.value)},B=W(o=>{o.length>0&&(_.value=!0,q(o,1,!1).then(l=>{w.value=l,_.value=!1}))},350),D=[{title:"Solicitud",data:"numero_solicitud",align:"center"},{title:"Tipo doc.",data:"tipo_documento",align:"center"},{title:"Justificación",data:"justificacion_solicitud",align:"left"},{title:"Afectación",data:"es_afectacion",align:"center"},{title:"Es directa",data:"es_directa",align:"center"}];return I(()=>{d({page:1}).then(()=>a.value=!0),v("",1,!1,!1).then(o=>S.value=o)}),(o,l)=>{const V=J("v-select");return f(),E(N,{name:"view"},{default:p(()=>[a.value?(f(),k("div",ne,[e("h4",{class:"view-name"},z(_e)),le,e("div",ie,[e("div",re,[r(K,{onOnCreate:C})])]),e("div",ue,[ce,e("div",de,[e("div",pe,[r(V,{loading:_.value,modelValue:n.value.unidad,"onUpdate:modelValue":l[0]||(l[0]=s=>n.value.unidad=s),reduce:s=>s.clave,options:w.value,placeholder:"Unidad administrativa",filterable:!1,onSearch:m(B),label:"nombre",class:"style-v-select form-select form-control height-custom"},{spinner:p(({loading:s})=>[r(Y,{loading:s},null,8,["loading"])]),"no-options":p(()=>[r(x)]),_:1},8,["loading","modelValue","reduce","options","onSearch"])]),e("div",me,[r(V,{modelValue:n.value.estatus,"onUpdate:modelValue":l[1]||(l[1]=s=>n.value.estatus=s),reduce:s=>s.id,options:S.value,placeholder:"Estatus",label:"descripcion",class:"style-v-select form-select form-control height-custom"},{"no-options":p(()=>[r(x)]),_:1},8,["modelValue","reduce","options"])]),e("div",ve,[A(e("input",{name:"anio",type:"number",class:"form-control height-custom",placeholder:"Año","onUpdate:modelValue":l[2]||(l[2]=s=>n.value.anio=s)},null,512),[[P,n.value.anio]])]),e("div",{class:"col-2"},[e("button",{class:"btn btn-secondary active w-100",role:"button","data-toggle":"dropdown",onClick:U,"aria-haspopup":"true","aria-expanded":"false"}," Buscar ")]),he])]),m(c).loading?R("",!0):(f(),E(H,{key:0,rowId:"id",columns:D,data:m(c).data,pagination:m(c).pagination,showDelete:"",showEdit:"",onOnPaginate:T,onOnEdit:M,onOnDelete:O,onOnCreate:C},null,8,["data","pagination"]))])):R("",!0)]),_:1})}}});const xe=L(fe,[["__scopeId","data-v-4b9d9562"]]);export{xe as default};
