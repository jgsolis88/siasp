import{r as u,d as B,a as G,o as z,c as N,b as e,e as r,w as p,u as y,g as m,S as w,k as T,F as ae,p as H,h as K,_ as Q,n as O,i as ne,j,T as ie,t as de}from"./index-675e3599.js";import{g as L,b as E}from"./api-6055b01b.js";import{C as re,p as J}from"./paginationHelper-8171a740.js";import{D as ce}from"./DataTableComponent-36f5eec6.js";import{_ as ue}from"./ModalComponent.vue_vue_type_style_index_0_lang-638c1a23.js";import{u as W}from"./useUnits-3f386980.js";import{_ as k,N as U}from"./NoOptionsComponent-06eee6fc.js";import{u as _e}from"./usePositions-79c5f16d.js";import{u as pe}from"./useLevelsArea-f8e6f9a6.js";import{u as ve}from"./useSubunitsBudget-1761e35d.js";import{u as me}from"./useScalesLevel-bd97fdc4.js";const D="cat_det_plantilla/",fe=()=>{const l=u({...re}),f=async({page:s=1})=>{try{l.value.loading=!0;const t=await L(`${D}`,{page:s,page_size:l.value.pagination.page_size});return l.value.data=t.results,l.value.pagination=J(l.value.pagination,s,t.count),l.value.loading=!1,Promise.resolve(t.results)}catch(t){return console.error(t),console.log("Error al cargar los resultados",t),Promise.reject(t)}},a=async(s="",t=1,h)=>{try{let d=b(h,t,s);l.value.loading=!0;const g=await L(`${D}`,d);return l.value.data=g.results,l.value.pagination=J(l.value.pagination,t,g.count),l.value.loading=!1,Promise.resolve(g.results)}catch(d){return console.error(d),console.log("Error al obtener resultados",d),Promise.reject(d)}},b=(s,t,h)=>{let d={page:t,search:h,page_size:l.value.pagination.page_size};return s.id_unidad_administrativa!==""&&s.id_unidad_administrativa!==null&&(d.id_unidad_administrativa=s.id_unidad_administrativa),s.id_subunidad_vs_presupuesto!==""&&s.id_subunidad_vs_presupuesto!==null&&(d.id_subunidad_vs_presupuesto=s.id_subunidad_vs_presupuesto),s.id_puesto!==""&&s.id_puesto!==null&&(d.id_puesto=s.id_puesto),s.id_nivel_tabulador!==""&&s.id_nivel_tabulador!==null&&(d.id_nivel_tabulador=s.id_nivel_tabulador),s.id_region!==""&&s.id_region!==null&&(d.id_region=s.id_region),s.id_escala_por_nivel!==""&&s.id_escala_por_nivel!==null&&(d.id_escala_por_nivel=s.id_escala_por_nivel),s.numero_plaza!==""&&s.numero_plaza!==null&&(d.numero_plaza=s.numero_plaza),s.id_codigo_federal_puesto!==""&&s.id_codigo_federal_puesto!==null&&(d.id_codigo_federal_puesto=s.id_codigo_federal_puesto),s.id_estatus!==""&&s.id_estatus!==null&&(d.id_estatus=s.id_estatus),d};return{jobs:l,getJobs:f,searchJobs:a}},be="reporte_cat_det_plantilla/",he=()=>{const l=async(a="xlsx",b="",s="")=>{try{const t=await L(`${be}${a}/${b}/${s}`,{});f(t,"reporte_plantilla."+a)}catch(t){return console.error(t),console.log("Error al cargar los resultados",t),Promise.reject(t)}},f=(a,b)=>{const s=window.URL.createObjectURL(a),t=document.createElement("a");t.href=s,t.download=`${b}`,t.dispatchEvent(new MouseEvent("click",{bubbles:!0,cancelable:!0,view:window})),setTimeout(()=>{window.URL.revokeObjectURL(s),t.remove()},100)};return{exportReport:l}},ge=l=>l.id_unidad_administrativa!==""&&l.id_unidad_administrativa!==null||l.id_subunidad_vs_presupuesto!==""&&l.id_subunidad_vs_presupuesto!==null||l.id_puesto!==""&&l.id_puesto!==null||l.id_nivel_tabulador!==""&&l.id_nivel_tabulador!==null||l.id_region!==""&&l.id_region!==null||l.id_escala_por_nivel!==""&&l.id_escala_por_nivel!==null||l.numero_plaza!==""&&l.numero_plaza!==null||l.id_codigo_federal_puesto!==""&&l.id_codigo_federal_puesto!==null||l.id_estatus!==""&&l.id_estatus!==null,Se=(l,f)=>l!==""&&l!==null&&f!=="",V=l=>(H("data-v-a0119018"),l=l(),K(),l),we=V(()=>e("div",{class:"row"},[e("div",{class:"col-md-12"},[e("h4",null,"Reporte de Plantilla")])],-1)),ye={class:"row form-group"},Ve={class:"col-md-12"},$e=V(()=>e("label",null,"Unidad Administrativa",-1)),ke={class:"row form-group"},Ue={class:"col-md-12 form-group"},xe={class:"form-check"},Ce=V(()=>e("label",{class:"form-check-label",for:"occupied"}," Ocupadas y vacantes ",-1)),Pe={class:"col-md-12 form-group"},Me={class:"form-check"},Ee=V(()=>e("label",{class:"form-check-label",for:"occupied"}," Ocupadas ",-1)),ze={class:"col-md-12 form-group"},Oe={class:"form-check"},Ne=V(()=>e("label",{class:"form-check-label",for:"vacancies"}," Vacantes ",-1)),Re={class:"col-md-12 form-group"},Ae={class:"form-check"},Fe=V(()=>e("label",{class:"form-check-label",for:"canceled"}," Canceladas ",-1)),Te={class:"col-md-12 form-group"},Le={class:"form-check"},Ie=V(()=>e("label",{class:"form-check-label",for:"in_process"}," En Trámite ",-1)),Be={class:"col-md-12 form-group"},je={class:"form-check"},Je=V(()=>e("label",{class:"form-check-label",for:"all"}," Todas ",-1)),De={key:0,class:"row form-group"},qe=V(()=>e("div",{class:"col-md-12"},[e("small",{class:"form-text text-muted app-form-message"}," Seleccione los criterios para el reporte ")],-1)),Ge=[qe],He={class:"row buttons-content"},Ke={class:"col-md-12"},Qe=B({__name:"ModalReportView",emits:["onCloseModal"],setup(l,{emit:f}){const{exportReport:a}=he(),{searchUnits:b}=W(),s=u(""),t=u(""),h=u([]),d=u(!1),g=u(!1),x=()=>{s.value="",t.value="",f("onCloseModal")},$=async S=>{Se(s.value,t.value)?await a(S,t.value,s.value):(d.value=!0,setTimeout(()=>{d.value=!1},3e3))},C=E(S=>{S.length>2&&(g.value=!0,b(S,1,!1).then(i=>{h.value=i,g.value=!1}))},350);return(S,i)=>{const P=G("v-select");return z(),N(ae,null,[we,e("div",ye,[e("div",Ve,[$e,r(P,{loading:g.value,reduce:c=>c.clave,modelValue:s.value,"onUpdate:modelValue":i[0]||(i[0]=c=>s.value=c),options:h.value,label:"nombre",filterable:!1,onSearch:y(C),placeholder:"Selecciona una opción",class:"style-v-select form-select form-control"},{spinner:p(({loading:c})=>[r(k,{loading:c},null,8,["loading"])]),"no-options":p(()=>[r(U)]),_:1},8,["loading","reduce","modelValue","options","onSearch"])])]),e("div",ke,[e("div",Ue,[e("div",xe,[m(e("input",{type:"radio",name:"occupied",id:"occupied","onUpdate:modelValue":i[1]||(i[1]=c=>t.value=c),value:"ocupadas_vacantes"},null,512),[[w,t.value]]),Ce])]),e("div",Pe,[e("div",Me,[m(e("input",{type:"radio",name:"occupied",id:"occupied","onUpdate:modelValue":i[2]||(i[2]=c=>t.value=c),value:"ocupadas"},null,512),[[w,t.value]]),Ee])]),e("div",ze,[e("div",Oe,[m(e("input",{type:"radio",name:"vacancies",id:"vacancies","onUpdate:modelValue":i[3]||(i[3]=c=>t.value=c),value:"vacantes"},null,512),[[w,t.value]]),Ne])]),e("div",Re,[e("div",Ae,[m(e("input",{type:"radio",name:"canceled",id:"canceled","onUpdate:modelValue":i[4]||(i[4]=c=>t.value=c),value:"canceladas"},null,512),[[w,t.value]]),Fe])]),e("div",Te,[e("div",Le,[m(e("input",{type:"radio",name:"in_process",id:"in_process","onUpdate:modelValue":i[5]||(i[5]=c=>t.value=c),value:"en_tramite"},null,512),[[w,t.value]]),Ie])]),e("div",Be,[e("div",je,[m(e("input",{type:"radio",name:"all",id:"all","onUpdate:modelValue":i[6]||(i[6]=c=>t.value=c),value:"todas"},null,512),[[w,t.value]]),Je])])]),d.value?(z(),N("div",De,Ge)):T("",!0),e("div",He,[e("div",Ke,[e("button",{type:"button",class:"btn btn-primary",onClick:i[7]||(i[7]=c=>$("xlsx"))},"Exportar Excel"),e("button",{type:"button",class:"btn btn-primary",onClick:i[8]||(i[8]=c=>$("pdf"))},"Exportar PDF"),e("button",{type:"button",class:"btn btn-secondary",onClick:x},"Cerrar")])])],64)}}});const q=Q(Qe,[["__scopeId","data-v-a0119018"]]),I={id_unidad_administrativa:"",id_subunidad_vs_presupuesto:"",id_puesto:"",id_nivel_tabulador:"",id_region:"",id_escala_por_nivel:"",numero_plaza:"",nombre:"",apellido_paterno:"",apellido_materno:"",id_codigo_federal_puesto:"",id_estatus:""},_=l=>(H("data-v-103c73d6"),l=l(),K(),l),We={class:"form-group p-4"},Xe=_(()=>e("legend",null,"Criterios de búsqueda",-1)),Ye={class:"row"},Ze={class:"col-md-4"},eo={class:"row"},oo={class:"col-md-12 form-group"},lo=_(()=>e("label",null,"Unidad Administrativa",-1)),so={class:"col-md-12 form-group"},to=_(()=>e("label",null,"Subunidad",-1)),ao={class:"col-md-12 form-group"},no=_(()=>e("label",null,"Puesto",-1)),io={class:"col-md-12 form-group"},ro=_(()=>e("label",null,"Nivel",-1)),co=_(()=>e("div",{class:"col-md-12 form-group"},[e("label",null,"No. Plaza"),e("input",{type:"number",class:"form-control",placeholder:"No. Plaza",autocomplete:"off"})],-1)),uo={class:"col-md-4"},_o={class:"row"},po={class:"col-md-12 form-group"},vo=_(()=>e("label",null,"Región",-1)),mo={class:"col-md-12 form-group"},fo=_(()=>e("label",null,"Escala",-1)),bo={class:"col-md-12 form-group"},ho=_(()=>e("label",null,"Nombre(s)",-1)),go={class:"col-md-12 form-group"},So=_(()=>e("label",null,"Apellido Paterno",-1)),wo={class:"col-md-12 form-group"},yo=_(()=>e("label",null,"Apellido Materno",-1)),Vo={class:"col-md-4"},$o={class:"row"},ko={class:"col-md-12 form-group"},Uo=_(()=>e("label",null,"Plaza",-1)),xo={class:"col-md-12 form-group"},Co=_(()=>e("label",null,"CFP",-1)),Po={class:"row"},Mo={class:"col-md-12"},Eo=_(()=>e("div",{class:"row"},[e("div",{class:"col-md-12"},[e("label",null,"Estatus")])],-1)),zo={class:"row"},Oo={class:"col-md-6"},No={class:"row"},Ro={class:"col-md-12 form-group"},Ao={class:"form-check"},Fo=_(()=>e("label",{class:"form-check-label",for:"occupied"}," Ocupadas ",-1)),To={class:"col-md-12 form-group"},Lo={class:"form-check"},Io=_(()=>e("label",{class:"form-check-label",for:"occupied"}," Vacantes ",-1)),Bo={class:"col-md-6"},jo={class:"row"},Jo={class:"col-md-12 form-group"},Do={class:"form-check"},qo=_(()=>e("label",{class:"form-check-label",for:"occupied"}," Canceladas ",-1)),Go={class:"col-md-12"},Ho={class:"form-check"},Ko=_(()=>e("label",{class:"form-check-label",for:"occupied"}," En Trámite ",-1)),Qo=_(()=>e("button",{title:"Meta 4",class:"dt-button buttons-meta btn btn-secondary btn-meta",disabled:""},[e("span",null,[e("i",{class:"bi bi-arrow-repeat"})])],-1)),Wo=_(()=>e("span",null,[e("i",{class:"bi bi-printer"})],-1)),Xo=[Wo],Yo=_(()=>e("span",null,[e("i",{class:"bi bi-arrow-counterclockwise"})],-1)),Zo=[Yo],el=B({__name:"FiltersView",emits:["onShowModal","onSearch"],setup(l,{emit:f}){const a=u({...I}),b=[{id:1,label:"Norte"},{id:2,label:"Sur"},{id:3,label:"Centro"}],{searchPositions:s}=_e(),{searchLevelsArea:t}=pe(),{searchSubunitsBudget:h}=ve(),{searchScalesLevel:d}=me(),{searchUnits:g}=W(),x=u([]),$=u([]),C=u([]),S=u([]),i=u([]),P=u(!1),c=u(!1),R=u(!1),A=u(!1),F=u(!1),X=()=>{a.value={...I}},Y=()=>{f("onShowModal")},Z=()=>{f("onSearch",a.value)},ee=E(v=>{v.length>2&&(P.value=!0,g(v,1,!1).then(n=>{x.value=n,P.value=!1}))},350),oe=E(v=>{v.length>2&&(A.value=!0,s(v,1,!1).then(n=>{S.value=n,A.value=!1}))},350),le=E(v=>{v.length>2&&(c.value=!0,h(v,1,!1).then(n=>{$.value=n,c.value=!1}))},350),se=E(v=>{v.length>2&&(F.value=!0,t(v,1,!1).then(n=>{i.value=n,F.value=!1}))},350),te=E(v=>{v.length>2&&(R.value=!0,d(v,1,!1).then(n=>{C.value=n,R.value=!1}))},350);return(v,n)=>{const M=G("v-select");return z(),N("fieldset",We,[Xe,e("div",Ye,[e("div",Ze,[e("div",eo,[e("div",oo,[lo,r(M,{loading:P.value,reduce:o=>o.clave,modelValue:a.value.id_unidad_administrativa,"onUpdate:modelValue":n[0]||(n[0]=o=>a.value.id_unidad_administrativa=o),options:x.value,label:"nombre",filterable:!1,onSearch:y(ee),placeholder:"Selecciona una opción",class:"style-v-select form-select form-control"},{spinner:p(({loading:o})=>[r(k,{loading:o},null,8,["loading"])]),"no-options":p(()=>[r(U)]),_:1},8,["loading","reduce","modelValue","options","onSearch"])]),e("div",so,[to,r(M,{loading:c.value,reduce:o=>o.id,modelValue:a.value.id_subunidad_vs_presupuesto,"onUpdate:modelValue":n[1]||(n[1]=o=>a.value.id_subunidad_vs_presupuesto=o),filterable:!1,options:$.value,label:"proyecto",onSearch:y(le),placeholder:"Selecciona una opción",class:"style-v-select form-select form-control"},{spinner:p(({loading:o})=>[r(k,{loading:o},null,8,["loading"])]),"no-options":p(()=>[r(U)]),_:1},8,["loading","reduce","modelValue","options","onSearch"])]),e("div",ao,[no,r(M,{loading:A.value,reduce:o=>o.id,modelValue:a.value.id_puesto,"onUpdate:modelValue":n[2]||(n[2]=o=>a.value.id_puesto=o),filterable:!1,options:S.value,label:"descripcion",onSearch:y(oe),placeholder:"Selecciona una opción",class:"style-v-select form-select form-control"},{spinner:p(({loading:o})=>[r(k,{loading:o},null,8,["loading"])]),"no-options":p(()=>[r(U)]),_:1},8,["loading","reduce","modelValue","options","onSearch"])]),e("div",io,[ro,r(M,{loading:F.value,reduce:o=>o.id,modelValue:a.value.id_nivel_tabulador,"onUpdate:modelValue":n[3]||(n[3]=o=>a.value.id_nivel_tabulador=o),filterable:!1,options:i.value,label:"descripcion",onSearch:y(se),placeholder:"Selecciona una opción",class:"style-v-select form-select form-control"},{spinner:p(({loading:o})=>[r(k,{loading:o},null,8,["loading"])]),"no-options":p(()=>[r(U)]),_:1},8,["loading","reduce","modelValue","options","onSearch"])]),co])]),e("div",uo,[e("div",_o,[e("div",po,[vo,r(M,{reduce:o=>o.id,modelValue:a.value.id_region,"onUpdate:modelValue":n[4]||(n[4]=o=>a.value.id_region=o),options:b,placeholder:"Selecciona una opción",class:"style-v-select form-select form-control"},{spinner:p(({loading:o})=>[r(k,{loading:o},null,8,["loading"])]),"no-options":p(()=>[r(U)]),_:1},8,["reduce","modelValue"])]),e("div",mo,[fo,r(M,{loading:R.value,reduce:o=>o.id,modelValue:a.value.id_escala_por_nivel,"onUpdate:modelValue":n[5]||(n[5]=o=>a.value.id_escala_por_nivel=o),filterable:!1,options:C.value,label:"descripcion",onSearch:y(te),placeholder:"Selecciona una opción",class:"style-v-select form-select form-control"},{spinner:p(({loading:o})=>[r(k,{loading:o},null,8,["loading"])]),"no-options":p(()=>[r(U)]),_:1},8,["loading","reduce","modelValue","options","onSearch"])]),e("div",bo,[ho,m(e("input",{"onUpdate:modelValue":n[6]||(n[6]=o=>a.value.nombre=o),type:"text",class:"form-control",placeholder:"Nombre(s)",autocomplete:"off"},null,512),[[O,a.value.nombre]])]),e("div",go,[So,m(e("input",{"onUpdate:modelValue":n[7]||(n[7]=o=>a.value.apellido_paterno=o),type:"text",class:"form-control",placeholder:"Paterno",autocomplete:"off"},null,512),[[O,a.value.apellido_paterno]])]),e("div",wo,[yo,m(e("input",{"onUpdate:modelValue":n[8]||(n[8]=o=>a.value.apellido_materno=o),type:"text",class:"form-control",placeholder:"Materno",autocomplete:"off"},null,512),[[O,a.value.apellido_materno]])])])]),e("div",Vo,[e("div",$o,[e("div",ko,[Uo,m(e("input",{type:"text",class:"form-control",placeholder:"Busca por plaza",autocomplete:"off","onUpdate:modelValue":n[9]||(n[9]=o=>a.value.numero_plaza=o)},null,512),[[O,a.value.numero_plaza]])]),e("div",xo,[Co,m(e("input",{"onUpdate:modelValue":n[10]||(n[10]=o=>a.value.id_codigo_federal_puesto=o),type:"text",class:"form-control",placeholder:"Busca por CFP",autocomplete:"off"},null,512),[[O,a.value.id_codigo_federal_puesto]])])]),e("div",Po,[e("div",Mo,[Eo,e("div",zo,[e("div",Oo,[e("div",No,[e("div",Ro,[e("div",Ao,[m(e("input",{type:"radio",name:"id_status",value:"1","onUpdate:modelValue":n[11]||(n[11]=o=>a.value.id_estatus=o)},null,512),[[w,a.value.id_estatus]]),Fo])]),e("div",To,[e("div",Lo,[m(e("input",{type:"radio",name:"id_status",value:"3","onUpdate:modelValue":n[12]||(n[12]=o=>a.value.id_estatus=o)},null,512),[[w,a.value.id_estatus]]),Io])])])]),e("div",Bo,[e("div",jo,[e("div",Jo,[e("div",Do,[m(e("input",{type:"radio",name:"id_status",value:"10","onUpdate:modelValue":n[13]||(n[13]=o=>a.value.id_estatus=o)},null,512),[[w,a.value.id_estatus]]),qo])]),e("div",Go,[e("div",Ho,[m(e("input",{type:"radio",name:"id_status",value:"8","onUpdate:modelValue":n[14]||(n[14]=o=>a.value.id_estatus=o)},null,512),[[w,a.value.id_estatus]]),Ko])])])])])])]),e("div",{class:"row buttons-content"},[e("div",{class:"col-md-12"},[e("div",{class:"row"},[Qo,e("button",{onClick:Y,title:"Imprimir",class:"dt-button buttons-print btn btn-secondary btn-imprimir"},Xo),e("button",{onClick:X,title:"Reiniciar filtros",class:"dt-button buttons-print btn btn-secondary btn-reiniciar"},Zo),e("button",{class:"btn btn-primary active",onClick:Z}," Buscar ")])])])])])])}}});const ol=Q(el,[["__scopeId","data-v-103c73d6"]]),ll={key:0},sl=e("hr",{class:"red"},null,-1),tl={class:"row"},al={class:"col-md-12"},nl="Búsqueda de Plazas",hl=B({__name:"JobSearchIndexView",setup(l){const f=u(q),a=u(!1),{getJobs:b,searchJobs:s,jobs:t}=fe(),h=u(""),d=u({...I}),g=i=>{ge(d.value)?s(h.value,i,d.value):b({page:i})},x=i=>{d.value=i,s(h.value,1,i)},$=()=>{f.value.openModal()},C=()=>{f.value.closeModal()},S=[{title:"No. Plaza",data:"numero_plaza",align:"left"},{title:"Cod. Fed de Pto",data:"id_codigo_federal_puesto",align:"left"},{title:"Unidad Adm.",data:"id_unidad_administrativa",align:"left"},{title:"Subunidad",data:"proyecto_subunidad",align:"left"},{title:"Puesto",data:"id_puesto",align:"left"},{title:"Nivel",data:"clave_nivel_tabulador",align:"left"},{title:"Region",data:"id_region",align:"left"},{title:"Escala",data:"descripcion_escala_por_nivel",align:"left"},{title:"Estatus Puesto",data:"id_estatus",align:"left"},{title:"No. Empleado",data:"id_empleado",align:"left"}];return ne(()=>{b({page:1}).then(()=>a.value=!0)}),(i,P)=>(z(),j(ie,{name:"view"},{default:p(()=>[a.value?(z(),N("div",ll,[e("h4",{class:"view-name"},de(nl)),sl,e("div",tl,[e("div",al,[r(ol,{onOnSearch:x,onOnShowModal:$}),y(t).loading?T("",!0):(z(),j(ce,{key:0,showColumnActions:!1,rowId:"clave",columns:S,data:y(t).data,pagination:y(t).pagination,onOnPaginate:g},null,8,["data","pagination"])),r(ue,{ref_key:"modalRef",ref:f},{default:p(()=>[r(q,{onOnCloseModal:C})]),_:1},512)])])])):T("",!0)]),_:1}))}});export{hl as default};
