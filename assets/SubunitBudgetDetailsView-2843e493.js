import{d as k,r as v,i as B,q as m,j as C,w,T as j,o as c,c as d,b as e,t as f,g as i,n as h,u,k as _,z as s}from"./index-878fd94d.js";import{s as E}from"./scrollHelper-62f64ba1.js";import{u as T}from"./useSubunitsBudget-11a671c0.js";import{u as F}from"./useFormValidation-888019d2.js";import{d as I}from"./subunitBudgetModel-3eb26d9a.js";import"./api-e27444fc.js";import"./paginationHelper-8171a740.js";const q={proyecto:{rules:[{validation:l=>l&&l.length>0,message:"El nombre es requerido."},{validation:l=>l&&l.length>3,message:"El nombre debe tener al menos tres caracteres."}]},actividad_prioritaria:{rules:[{validation:l=>l&&l.length>0,message:"La descripción es requerida."},{validation:l=>l&&l.length>3,message:"La descripción debe tener al menos tres caracteres."}]}},z={key:0},G={class:"view-name"},A=e("hr",{class:"red"},null,-1),M={class:"p-4"},D={key:0,class:"form-group"},N=e("label",{for:"clave-functional-job"},"Clave",-1),L={key:0,id:"clave-nivel-small",class:"form-text text-muted app-validation"},H={class:"form-group"},J=e("label",null,"Proyecto",-1),K={key:0,id:"name-nivel-small",class:"form-text text-muted app-validation"},O={class:"form-group"},Q=e("label",null,"Actividad prioritaria",-1),W={key:0,id:"actividad_prioritaria-nivel-small",class:"form-text text-muted app-validation"},X={class:"form-group"},Y=e("label",null,"Unidad Ejecutora",-1),Z=e("option",{value:"0"},"Seleccione una opción",-1),$=e("option",{value:"1"},"Registro de Prueba",-1),ee=[Z,$],oe={class:"form-group"},te=e("label",null,"Clave de la Función",-1),ae=e("option",{value:"0"},"Seleccione una opción",-1),ie=e("option",{value:"1"},"Registro de Prueba",-1),se=[ae,ie],le={class:"form-group"},ne=e("label",null,"Programa Sectorial",-1),ue=e("option",{value:"0"},"Seleccione una opción",-1),ce=e("option",{value:"1"},"Registro de Prueba",-1),re=[ue,ce],de={class:"form-group"},_e=e("label",null,"Programa Especial",-1),pe=e("option",{value:"0"},"Seleccione una opción",-1),ve=e("option",{value:"1"},"Registro de Prueba",-1),me=[pe,ve],fe={class:"form-group"},ge=e("label",null,"Tipo de Gasto",-1),be=e("option",{value:"0"},"Seleccione una opción",-1),he=e("option",{value:"1"},"Registro de Prueba",-1),ye=[be,he],Se={class:"form-group"},Ve=e("label",null,"Gasto Específico",-1),Pe=e("option",{value:"0"},"Seleccione una opción",-1),Ue=e("option",{value:"1"},"Registro de Prueba",-1),xe=[Pe,Ue],Re={class:"form-group"},ke=e("label",null,"Fuente de Financiamiento",-1),Be=e("option",{value:"0"},"Seleccione una opción",-1),Ce=e("option",{value:"1"},"Registro de Prueba",-1),we=[Be,Ce],je={class:"form-group"},Ee=e("label",null,"Subfunción Agrupada",-1),Te=e("option",{value:"0"},"Seleccione una opción",-1),Fe=e("option",{value:"1"},"Registro de Prueba",-1),Ie=[Te,Fe],qe={class:"form-group"},ze=e("label",null,"Subfunción Específica",-1),Ge=e("option",{value:"0"},"Seleccione una opción",-1),Ae=e("option",{value:"1"},"Registro de Prueba",-1),Me=[Ge,Ae],De={class:"form-group"},Ne=e("label",null,"Programa",-1),Le=e("option",{value:"0"},"Seleccione una opción",-1),He=e("option",{value:"1"},"Registro de Prueba",-1),Je=[Le,He],Ke={class:"form-group"},Oe=e("label",null,"Grupo de Proyecto",-1),Qe=e("option",{value:"0"},"Seleccione una opción",-1),We=e("option",{value:"1"},"Registro de Prueba",-1),Xe=[Qe,We],Ye={class:"form-group"},Ze=e("label",null,"Grupo Funcional",-1),$e=e("option",{value:"0"},"Seleccione una opción",-1),eo=e("option",{value:"1"},"Registro de Prueba",-1),oo=[$e,eo],to={class:"form-group"},ao=e("label",null,"Actividad Institucional",-1),io=e("option",{value:"0"},"Seleccione una opción",-1),so=e("option",{value:"1"},"Registro de Prueba",-1),lo=[io,so],no={key:1,class:"form-text text-muted app-form-message"},fo=k({__name:"SubunitBudgetDetailsView",setup(l){const y=v("Registrar Subunidad vs. Clave Presupuestal"),{saveSubunitBudget:S,updateSubunitBudget:V,getSubunitBudgetById:P}=T(),r=v(""),g=v(!1),p=v(!1),o=v({...I}),{isValid:U,errors:n}=F(o.value,q),x=()=>{m.push({name:"listar-subunidades-clave-presupuesto"})},R=()=>{U.value&&(r.value?V(r.value,{...o.value}).then(()=>{m.push({name:"listar-subunidades-clave-presupuesto"})}).catch(()=>{p.value=!0,setTimeout(()=>{p.value=!1},3e3)}):S({...o.value}).then(()=>{m.push({name:"listar-subunidades-clave-presupuesto"})}).catch(()=>{p.value=!0,setTimeout(()=>{p.value=!1},3e3)}))};return B(()=>{var b;r.value=(b=m.currentRoute.value.params.id)==null?void 0:b.toString(),r.value?(y.value="Actualizar Subunidad vs. Clave Presupuestal",P(r.value).then(t=>{o.value.proyecto=t.proyecto,o.value.actividad_prioritaria=t.actividad_prioritaria,o.value.id_actividad_institucional=t.id_actividad_institucional,o.value.id_funcion=t.id_funcion,o.value.id_grupo_funcional=t.id_grupo_funcional,o.value.id_grupo_proyecto=t.id_grupo_proyecto,o.value.clave=t.clave,o.value.fuente_financiamiento=t.fuente_financiamiento,o.value.gasto_especifico=t.gasto_especifico,o.value.id_subfuncion=t.id_subfuncion,o.value.programa=t.programa,o.value.programa_especial=t.programa_especial,o.value.programa_sectorial=t.programa_sectorial,o.value.subfuncion_agrupada=t.subfuncion_agrupada,o.value.subfuncion_especifica=t.subfuncion_especifica,o.value.tipo_gasto=t.tipo_gasto,o.value.unidad_ejecutora=t.unidad_ejecutora,g.value=!0})):g.value=!0,E()}),(b,t)=>(c(),C(j,{name:"view"},{default:w(()=>[g.value?(c(),d("div",z,[e("h4",G,f(y.value),1),A,e("form",M,[r.value?_("",!0):(c(),d("div",D,[N,i(e("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=a=>o.value.clave=a),class:"form-control",id:"clave-functional-job",placeholder:"Introduzca la clave",autocomplete:"off"},null,512),[[h,o.value.clave]]),u(n)&&u(n).clave?(c(),d("small",L,f(u(n).clave),1)):_("",!0)])),e("div",H,[J,i(e("input",{type:"text","onUpdate:modelValue":t[1]||(t[1]=a=>o.value.proyecto=a),class:"form-control",id:"name-subunit-budget",placeholder:"Introduzca el proyecto",autocomplete:"off"},null,512),[[h,o.value.proyecto]]),u(n)&&u(n).proyecto?(c(),d("small",K,f(u(n).proyecto),1)):_("",!0)]),e("div",O,[Q,i(e("input",{type:"text","onUpdate:modelValue":t[2]||(t[2]=a=>o.value.actividad_prioritaria=a),class:"form-control",id:"description-subunit-budget",placeholder:"Introduzca la actividad prioritaria",autocomplete:"off"},null,512),[[h,o.value.actividad_prioritaria]]),u(n)&&u(n).actividad_prioritaria?(c(),d("small",W,f(u(n).actividad_prioritaria),1)):_("",!0)]),e("div",X,[Y,i(e("select",{class:"form-select form-control","onUpdate:modelValue":t[3]||(t[3]=a=>o.value.unidad_ejecutora=a)},ee,512),[[s,o.value.unidad_ejecutora]])]),e("div",oe,[te,i(e("select",{class:"form-select form-control","onUpdate:modelValue":t[4]||(t[4]=a=>o.value.id_funcion=a)},se,512),[[s,o.value.id_funcion]])]),e("div",le,[ne,i(e("select",{class:"form-select form-control","onUpdate:modelValue":t[5]||(t[5]=a=>o.value.programa_sectorial=a)},re,512),[[s,o.value.programa_sectorial]])]),e("div",de,[_e,i(e("select",{class:"form-select form-control","onUpdate:modelValue":t[6]||(t[6]=a=>o.value.programa_especial=a)},me,512),[[s,o.value.programa_especial]])]),e("div",fe,[ge,i(e("select",{class:"form-select form-control","onUpdate:modelValue":t[7]||(t[7]=a=>o.value.tipo_gasto=a)},ye,512),[[s,o.value.tipo_gasto]])]),e("div",Se,[Ve,i(e("select",{class:"form-select form-control","onUpdate:modelValue":t[8]||(t[8]=a=>o.value.gasto_especifico=a)},xe,512),[[s,o.value.gasto_especifico]])]),e("div",Re,[ke,i(e("select",{class:"form-select form-control","onUpdate:modelValue":t[9]||(t[9]=a=>o.value.fuente_financiamiento=a)},we,512),[[s,o.value.fuente_financiamiento]])]),e("div",je,[Ee,i(e("select",{class:"form-select form-control","onUpdate:modelValue":t[10]||(t[10]=a=>o.value.subfuncion_agrupada=a)},Ie,512),[[s,o.value.subfuncion_agrupada]])]),e("div",qe,[ze,i(e("select",{class:"form-select form-control","onUpdate:modelValue":t[11]||(t[11]=a=>o.value.subfuncion_especifica=a)},Me,512),[[s,o.value.subfuncion_especifica]])]),e("div",De,[Ne,i(e("select",{class:"form-select form-control","onUpdate:modelValue":t[12]||(t[12]=a=>o.value.programa=a)},Je,512),[[s,o.value.programa]])]),e("div",Ke,[Oe,i(e("select",{class:"form-select form-control","onUpdate:modelValue":t[13]||(t[13]=a=>o.value.id_grupo_proyecto=a)},Xe,512),[[s,o.value.id_grupo_proyecto]])]),e("div",Ye,[Ze,i(e("select",{class:"form-select form-control","onUpdate:modelValue":t[14]||(t[14]=a=>o.value.id_grupo_funcional=a)},oo,512),[[s,o.value.id_grupo_funcional]])]),e("div",to,[ao,i(e("select",{class:"form-select form-control","onUpdate:modelValue":t[15]||(t[15]=a=>o.value.id_actividad_institucional=a)},lo,512),[[s,o.value.id_actividad_institucional]])]),e("div",{class:"modal-footer"},[e("button",{type:"button",class:"btn btn-secondary",onClick:x}," Cancelar "),e("button",{type:"button",onClick:R,class:"btn btn-primary"}," Guardar ")]),p.value?(c(),d("small",no," Verifique que los datos esten correctos, o no haya sido registrado previamiente. ")):_("",!0)])])):_("",!0)]),_:1}))}});export{fo as default};
