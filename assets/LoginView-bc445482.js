import{r as v,l as A,i as P,d as F,m as N,c as m,e as E,w as V,T as x,o as _,b as s,t as g,u as d,A as R,n as T,k as h,g as I,q as S,s as b,p as O,h as j,_ as q}from"./index-8d34d961.js";import{u as B}from"./authenticationStore-e19c1f83.js";import"./api-df405b15.js";const U=(e,a)=>{const f=v(!1),r=v({}),l=v({}),t=()=>{const c=Object.keys(a);for(let o of c){if(l.value[o]&&!e[o])continue;l.value[o]=!1;const n=a[o].rules;for(let u of n)if(u.validation(e[o])){const p={...r.value};delete p[o],r.value=p}else{const p={...r.value};p[o]=u.message,r.value={...p};break}}f.value=y()},y=()=>{let c=!0;const o=Object.keys(a);for(let n of o){const u=a[n].rules;for(let k of u)k.validation(e[n])||(c=!1)}return c},i=()=>{const c=Object.keys(a);for(let o of c)l.value[o]=!0};return A(e,()=>{t()}),P(()=>{i(),t()}),{isValid:f,errors:r}},z=e=>new RegExp("^[A-Za-z0-9_!#$%&'*+/=?`{|}~^.-]+@[A-Za-z0-9.-]+$").test(e),C=e=>e&&e.length>0,L=(e,a)=>e&&e.length>=a,H={username:{rules:[{validation:e=>C(e),message:"El usuario es obligatorio."},{validation:e=>L(e,3),message:"El usuario requiere al menos tres caracteres."},{validation:e=>z(e),message:"El usuario debe ser un correo válido."}]},password:{rules:[{validation:e=>C(e),message:"El password es obligatorio."},{validation:e=>L(e,3),message:"El password requiere al menos tres caracteres."}]}},M={username:"",password:""},w=e=>(O("data-v-29ecf4ce"),e=e(),j(),e),Z={class:"container-login100"},$={key:0,class:"wrap-login100"},D={class:"title-login app-pointer"},G={class:"title-login app-pointer"},J=w(()=>s("div",{class:"pl-5 pr-5"},[s("hr",{class:"red"})],-1)),K={class:"login100-form"},Q={key:0,class:"alert alert-danger mb-4",role:"alert"},W={class:"col-md-12 p-0"},X=w(()=>s("label",{for:"usuario",class:"form-label"},"Usuario",-1)),Y={key:0,class:"app-validation"},ee={class:"col-md-12 p-0"},se=w(()=>s("label",{for:"password",class:"form-label"},"Contraseña",-1)),oe={key:0,class:"app-validation"},ae=w(()=>s("div",{class:"forgot-pass"},[s("a",{href:"#"}," ¿Ha olvídado tu contraseña? ")],-1)),te={key:0,class:"login-message"},le=F({__name:"LoginView",setup(e){const a=B(),f=v(!1),r=v(""),l=v(!1),t=N(M),{isValid:y,errors:i}=U(t,H),c=()=>{y.value&&(l.value=!1,a.login(t.username,t.password).then(o=>{o?b.push({name:"home"}):b.push({name:"login"})}).catch(()=>{l.value=!0,f.value=!0,r.value="Hubo un problema al iniciar sesión. Favor de verificar sus credenciales e intentar de nuevo.",b.push({name:"login"})}))};return P(()=>{l.value=!0}),(o,n)=>(_(),m("div",Z,[E(x,{name:"login"},{default:V(()=>[l.value?(_(),m("div",$,[s("h3",D,g(d(R)),1),s("h6",G,g(d(T)),1),J,s("form",K,[f.value?(_(),m("div",Q,g(r.value),1)):h("",!0),s("div",W,[X,I(s("input",{type:"email",id:"usuario","onUpdate:modelValue":n[0]||(n[0]=u=>t.username=u),class:"form-control",autocomplete:"off",placeholder:"Nombre de usuario"},null,512),[[S,t.username]]),d(i)&&d(i).username?(_(),m("small",Y,g(d(i).username),1)):h("",!0)]),s("div",ee,[se,I(s("input",{type:"password","onUpdate:modelValue":n[1]||(n[1]=u=>t.password=u),id:"password",class:"form-control",autocomplete:"off",placeholder:"Contraseña"},null,512),[[S,t.password]]),d(i)&&d(i).password?(_(),m("small",oe,g(d(i).password),1)):h("",!0)]),ae,s("div",{className:"buttons-login text-end"},[s("button",{class:"btn btn-primary",type:"button",onClick:c}," Iniciar sesión ")])])])):h("",!0)]),_:1}),E(x,{name:"login-message"},{default:V(()=>[l.value?h("",!0):(_(),m("div",te," Iniciando Sesión. Espere... "))]),_:1})]))}});const ce=q(le,[["__scopeId","data-v-29ecf4ce"]]);export{ce as default};
