import{d as z,r as f,i as D,q as h,j as E,w as q,T as I,o as c,c as r,b as e,t as p,g as n,n as _,u as s,k as d,B as g}from"./index-675e3599.js";import{s as U}from"./scrollHelper-62f64ba1.js";import{u as B}from"./useTabEffectiveDates-727a3878.js";import{u as F}from"./useFormValidation-6eda1048.js";import{d as L}from"./tabEffectiveDateModel-013912c4.js";import"./api-6055b01b.js";import"./paginationHelper-8171a740.js";const M={fecha_inicio_real:{rules:[{validation:o=>o&&o.length>0,message:"La fecha es requerida."}]},fecha_inicio_shcp:{rules:[{validation:o=>o&&o.length>0,message:"La fecha es requerida."}]},incremento:{rules:[{validation:o=>o>0,message:"El incremento es requerido."}]},descripcion:{rules:[{validation:o=>o&&o.length>0,message:"La descripción es requerida."},{validation:o=>o&&o.length>3,message:"La descripción debe tener al menos tres caracteres."}]}},N={key:0},S={class:"view-name"},R=e("hr",{class:"red"},null,-1),j={class:"p-4"},A={class:"form-group"},G=e("label",null,"Fecha de inicio real",-1),H={key:0,class:"form-text text-muted app-validation"},J={class:"form-group"},K=e("label",null,"Fecha de inicio shcp",-1),O={key:0,class:"form-text text-muted app-validation"},P={class:"form-group"},Q=e("label",null,"Descripción",-1),W={key:0,id:"descripcion-nivel-small",class:"form-text text-muted app-validation"},X={class:"form-group"},Y=e("label",null,"Incremento",-1),Z={key:0,class:"form-text text-muted app-validation"},$={class:"form-check"},ee=e("label",{class:"form-check-label pl-4",for:"nombre"},"Es aplicado",-1),ae={class:"form-check"},te=e("label",{class:"form-check-label pl-4",for:"nombre"},"Está regularizada",-1),oe={class:"form-check"},ie=e("label",{class:"form-check-label pl-4",for:"nombre"},"Considerar afectación",-1),le={key:0,class:"form-text text-muted app-form-message"},fe=z({__name:"TabEffectiveDateDetailsView",setup(o){const k=f("Registrar Fecha de Vigencia de Tabulador"),{saveTabEffectiveDate:x,updateEffectiveDate:y,getTabEffectiveDateById:V}=B(),u=f(""),v=f(!1),m=f(!1),a=f({...L}),{isValid:T,errors:l}=F(a.value,M),C=()=>{h.push({name:"listar-fechas-vigencia-tabulador"})},w=()=>{T.value&&(u.value?y(u.value,{...a.value}).then(()=>{h.push({name:"listar-fechas-vigencia-tabulador"})}).catch(()=>{m.value=!0,setTimeout(()=>{m.value=!1},3e3)}):x({...a.value}).then(()=>{h.push({name:"listar-fechas-vigencia-tabulador"})}).catch(()=>{m.value=!0,setTimeout(()=>{m.value=!1},3e3)}))};return D(()=>{var b;u.value=(b=h.currentRoute.value.params.id)==null?void 0:b.toString(),u.value?(k.value="Actualizar Fecha de Vigencia de Tabulador",V(u.value).then(t=>{a.value.fecha_inicio_real=t.fecha_inicio_real,a.value.fecha_inicio_shcp=t.fecha_inicio_shcp,a.value.descripcion=t.descripcion,a.value.incremento=t.incremento,a.value.es_afectacion=t.es_afectacion,a.value.es_aplicado=t.es_aplicado,a.value.es_regularizada=t.es_regularizada,v.value=!0})):v.value=!0,U()}),(b,t)=>(c(),E(I,{name:"view"},{default:q(()=>[v.value?(c(),r("div",N,[e("h4",S,p(k.value),1),R,e("form",j,[e("div",A,[G,n(e("input",{type:"date","onUpdate:modelValue":t[0]||(t[0]=i=>a.value.fecha_inicio_real=i),class:"form-control",placeholder:"Introduzca la fecha de vigencia",autocomplete:"off"},null,512),[[_,a.value.fecha_inicio_real]]),s(l)&&s(l).fecha_inicio_real?(c(),r("small",H,p(s(l).fecha_inicio_real),1)):d("",!0)]),e("div",J,[K,n(e("input",{type:"date","onUpdate:modelValue":t[1]||(t[1]=i=>a.value.fecha_inicio_shcp=i),class:"form-control",placeholder:"Introduzca la fecha de vigencia",autocomplete:"off"},null,512),[[_,a.value.fecha_inicio_shcp]]),s(l)&&s(l).fecha_inicio_shcp?(c(),r("small",O,p(s(l).fecha_inicio_shcp),1)):d("",!0)]),e("div",P,[Q,n(e("input",{type:"text","onUpdate:modelValue":t[2]||(t[2]=i=>a.value.descripcion=i),class:"form-control",id:"description-bank",placeholder:"Introduzca la descripción",autocomplete:"off"},null,512),[[_,a.value.descripcion]]),s(l)&&s(l).descripcion?(c(),r("small",W,p(s(l).descripcion),1)):d("",!0)]),e("div",X,[Y,n(e("input",{type:"text","onUpdate:modelValue":t[3]||(t[3]=i=>a.value.incremento=i),class:"form-control",placeholder:"Introduzca el incremento",autocomplete:"off"},null,512),[[_,a.value.incremento]]),s(l)&&s(l).incremento?(c(),r("small",Z,p(s(l).incremento),1)):d("",!0)]),e("div",$,[n(e("input",{class:"form-check-input",type:"checkbox","onUpdate:modelValue":t[4]||(t[4]=i=>a.value.es_aplicado=i)},null,512),[[g,a.value.es_aplicado]]),ee]),e("div",ae,[n(e("input",{class:"form-check-input",placeholder:"Considerar afectación",type:"checkbox","onUpdate:modelValue":t[5]||(t[5]=i=>a.value.es_regularizada=i)},null,512),[[g,a.value.es_regularizada]]),te]),e("div",oe,[n(e("input",{class:"form-check-input",placeholder:"Considerar afectación",type:"checkbox","onUpdate:modelValue":t[6]||(t[6]=i=>a.value.es_afectacion=i)},null,512),[[g,a.value.es_afectacion]]),ie]),e("div",{class:"modal-footer"},[e("button",{type:"button",class:"btn btn-secondary",onClick:C}," Cancelar "),e("button",{type:"button",onClick:w,class:"btn btn-primary"}," Guardar ")]),m.value?(c(),r("small",le," Verifique que los datos esten correctos, o no haya sido registrado previamiente. ")):d("",!0)])])):d("",!0)]),_:1}))}});export{fe as default};
