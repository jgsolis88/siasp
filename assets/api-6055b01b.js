import{C as w,D as f,E as m,y as T,L as y}from"./index-675e3599.js";const g={mode:"cors",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/json"},method:"GET"},E=()=>"https://sia-sp-backend-production.up.railway.app/api/v1/",R=e=>new Promise(t=>setTimeout(t,e)),$=(e,t,s,o,r)=>{r&&console.log("There was problem processing your request. Check with the sys admin.")},j=(e,t)=>{let s;return(...o)=>{clearTimeout(s),s=setTimeout(()=>{e(...o)},t)}},k={...g},b=E(),i=async(e,t,s={},o={},r=!0)=>{const c=w();try{r&&c.initTransaction();let a={...k};a.method=t,f()&&(a.headers.Authorization=`Bearer ${m()}`),Object.keys(s).length>0&&(a.body=JSON.stringify(s));const h=Object.keys(o).map(u=>encodeURIComponent(u)+"="+encodeURIComponent(o[u])).join("&"),p=Object.keys(o).length>0?`${e}?`+h:e,n=await fetch(`${b+p}`,a);if(n.status>=500)throw new Error(`There was a 5xx error on ${e} with method ${t}. Check with the sys admin.`);if(n.status>=400&&n.status!==401&&n.status<500)throw new Error(`There was a 4xx error on ${e} with method ${t}. Check your request.`);if(n.status===401)throw T(),new Error("Please, check your credentials and try again.");const d=n.headers.get("content-type")==="application/json";if(n.headers.get("content-type")=="application/force-download")return c.endTransaction(),n.blob();const l=d?await n.json():{};return await R(y),r&&c.endTransaction(),Promise.resolve(l)}catch(a){return c.endTransaction(),$(e,t,s,o,a),Promise.reject(a)}},C=(e,t={},s=!0)=>i(e,"GET",{},t,s),O=(e="",t={},s=!0)=>i(e,"POST",t,s),P=(e,t,s,o=!0)=>i(`${e}${t}/`,"PUT",s,o),L=(e,t,s=!0)=>i(`${e}${t}/`,"DELETE",{},{},s);export{P as a,j as b,L as d,C as g,O as p};
