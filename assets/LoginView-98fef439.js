import{d as C,r as _,l as L,i as A,c as n,e as w,w as b,T as y,o as r,b as s,t as l,u as a,A as N,m as T,k as c,g as E,n as V,q as g,p as P,h as q,_ as B}from"./index-5c846d88.js";import{u as D}from"./authenticationStore-e7568d27.js";import{u as F}from"./useFormValidation-836e8b0d.js";import"./api-a28052fa.js";const U=e=>new RegExp("^[A-Za-z0-9_!#$%&'*+/=?`{|}~^.-]+@[A-Za-z0-9.-]+$").test(e),x=e=>e&&e.length>0,k=(e,d)=>e&&e.length>=d,z={username:{rules:[{validation:e=>x(e),message:"El usuario es obligatorio."},{validation:e=>k(e,3),message:"El usuario requiere al menos tres caracteres."},{validation:e=>U(e),message:"El usuario debe ser un correo válido."}]},password:{rules:[{validation:e=>x(e),message:"El password es obligatorio."},{validation:e=>k(e,3),message:"El password requiere al menos tres caracteres."}]}},H={username:"",password:""},p=e=>(P("data-v-29ecf4ce"),e=e(),q(),e),M={class:"container-login100"},R={key:0,class:"wrap-login100"},Z={class:"title-login app-pointer"},$={class:"title-login app-pointer"},O=p(()=>s("div",{class:"pl-5 pr-5"},[s("hr",{class:"red"})],-1)),j={class:"login100-form"},G={key:0,class:"alert alert-danger mb-4",role:"alert"},J={class:"col-md-12 p-0"},K=p(()=>s("label",{for:"usuario",class:"form-label"},"Usuario",-1)),Q={key:0,class:"app-validation"},W={class:"col-md-12 p-0"},X=p(()=>s("label",{for:"password",class:"form-label"},"Contraseña",-1)),Y={key:0,class:"app-validation"},ee=p(()=>s("div",{class:"forgot-pass"},[s("a",{href:"#"}," ¿Ha olvídado tu contraseña? ")],-1)),se={key:0,class:"login-message"},ae=C({__name:"LoginView",setup(e){const d=D(),v=_(!1),h=_(""),i=_(!1),o=L(H),{isValid:I,errors:t}=F(o,z),S=()=>{I.value&&(i.value=!1,d.login(o.username,o.password).then(f=>{f?g.push({name:"home"}):g.push({name:"login"})}).catch(()=>{i.value=!0,v.value=!0,h.value="Hubo un problema al iniciar sesión. Favor de verificar sus credenciales e intentar de nuevo.",g.push({name:"login"})}))};return A(()=>{i.value=!0}),(f,u)=>(r(),n("div",M,[w(y,{name:"login"},{default:b(()=>[i.value?(r(),n("div",R,[s("h3",Z,l(a(N)),1),s("h6",$,l(a(T)),1),O,s("form",j,[v.value?(r(),n("div",G,l(h.value),1)):c("",!0),s("div",J,[K,E(s("input",{type:"email",id:"usuario","onUpdate:modelValue":u[0]||(u[0]=m=>o.username=m),class:"form-control",autocomplete:"off",placeholder:"Nombre de usuario"},null,512),[[V,o.username]]),a(t)&&a(t).username?(r(),n("small",Q,l(a(t).username),1)):c("",!0)]),s("div",W,[X,E(s("input",{type:"password","onUpdate:modelValue":u[1]||(u[1]=m=>o.password=m),id:"password",class:"form-control",autocomplete:"off",placeholder:"Contraseña"},null,512),[[V,o.password]]),a(t)&&a(t).password?(r(),n("small",Y,l(a(t).password),1)):c("",!0)]),ee,s("div",{className:"buttons-login text-end"},[s("button",{class:"btn btn-primary",type:"button",onClick:S}," Iniciar sesión ")])])])):c("",!0)]),_:1}),w(y,{name:"login-message"},{default:b(()=>[i.value?c("",!0):(r(),n("div",se," Iniciando Sesión. Espere... "))]),_:1})]))}});const ie=B(ae,[["__scopeId","data-v-29ecf4ce"]]);export{ie as default};
