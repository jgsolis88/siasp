import{d as B,r as i,m as k,y as r,q as T,w as C,T as x,o as n,c as d,b as e,t as p,g as v,D as _,F as N,l as D,u as F,k as f}from"./index-1b3fb38e.js";import{s as q}from"./scrollHelper-62f64ba1.js";import{u as E}from"./useValidRegionsByState-82a8eae0.js";import{u as L}from"./useLevelsTab-eae73d49.js";import{u as M}from"./useFormValidation-fd822eea.js";import{d as U}from"./validRegionByStateModel-d3006d60.js";import"./api-fdc0db9b.js";import"./paginationHelper-8171a740.js";const A={id_estado:{rules:[]}},P={key:0},z={class:"view-name"},G=e("hr",{class:"red"},null,-1),I={class:"p-4"},j={class:"form-group"},H=e("label",{for:"clave-nivel"},"Estado",-1),J=e("option",{value:"0"},"Selecciona una opción",-1),K=e("option",{value:"1"}," Estado de Prueba ",-1),O=[J,K],Q={class:"form-group"},W=e("label",{for:"descripcion-nivel"},"Nivel Tabulador",-1),X=e("option",{value:"0"},"Selecciona una opción",-1),Y=["value"],Z={class:"form-group"},$=e("label",{for:"descripcion-nivel"},"Región",-1),ee=e("option",{value:"0"},"Selecciona una opción",-1),ae=e("option",{value:"1"}," Región de Prueba ",-1),te=[ee,ae],oe={key:0,class:"form-text text-muted app-form-message"},_e=B({__name:"ValidRegionsByStateDetailView",setup(se){const m=i("Registrar Región válida por estado"),{updateValidRegionByState:h,getValidRegionByState:g,saveValidRegionByState:b}=E(),s=i(""),u=i(!1),l=i(!1),a=i({...U}),{isValid:V}=M(a.value,A),{levelsTab:y,getAllLevelsTab:S}=L(),R=()=>{r.push({name:"listar-regiones-validas"})},w=()=>{V.value&&(s.value?h(s.value,{...a.value}).then(()=>{r.push({name:"listar-regiones-validas"})}).catch(()=>{l.value=!0,setTimeout(()=>{l.value=!1},3e3)}):b({...a.value}).then(()=>{r.push({name:"listar-regiones-validas"})}).catch(()=>{l.value=!0,setTimeout(()=>{l.value=!1},3e3)}))};return k(()=>{var c;s.value=(c=r.currentRoute.value.params.id)==null?void 0:c.toString(),s.value?(m.value="Actualizar Región válida por estado",g(s.value).then(t=>{a.value.id=t.id,a.value.id_estado=t.id_estado,a.value.id_nivel_tabulador=t.id_nivel_tabulador,a.value.id_region=t.id_region,u.value=!0})):u.value=!0,q(),S({})}),(c,t)=>(n(),T(x,{name:"view"},{default:C(()=>[u.value?(n(),d("div",P,[e("h4",z,p(m.value),1),G,e("form",I,[e("div",j,[H,v(e("select",{class:"form-select form-control","onUpdate:modelValue":t[0]||(t[0]=o=>a.value.id_estado=o)},O,512),[[_,a.value.id_estado]])]),e("div",Q,[W,v(e("select",{class:"form-select form-control","onUpdate:modelValue":t[1]||(t[1]=o=>a.value.id_nivel_tabulador=o)},[X,(n(!0),d(N,null,D(F(y).data,o=>(n(),d("option",{key:o.id,value:o.id},p("Nivel "+o.clave),9,Y))),128))],512),[[_,a.value.id_nivel_tabulador]])]),e("div",Z,[$,v(e("select",{class:"form-select form-control","onUpdate:modelValue":t[2]||(t[2]=o=>a.value.id_region=o)},te,512),[[_,a.value.id_region]])]),e("div",{class:"modal-footer"},[e("button",{type:"button",class:"btn btn-secondary",onClick:R}," Cancelar "),e("button",{type:"button",onClick:w,class:"btn btn-primary"}," Guardar ")]),l.value?(n(),d("small",oe," Verifique que los datos esten correctos, o no haya sido registrado previamiente. ")):f("",!0)])])):f("",!0)]),_:1}))}});export{_e as default};
