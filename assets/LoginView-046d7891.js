import{d as C,r as _,l as L,i as N,c as n,e as w,w as b,T as y,o as r,b as s,f as T,t as l,u as a,A,m as P,k as d,g as V,n as E,q as g,p as q,h as B,_ as D}from"./index-f4a219e0.js";import{u as F}from"./authenticationStore-67f39f47.js";import{u as U}from"./useFormValidation-239e3d60.js";import"./api-b3ceef70.js";const z=e=>new RegExp("^[A-Za-z0-9_!#$%&'*+/=?`{|}~^.-]+@[A-Za-z0-9.-]+$").test(e),x=e=>e&&e.length>0,k=(e,c)=>e&&e.length>=c,H={username:{rules:[{validation:e=>x(e),message:"El usuario es obligatorio."},{validation:e=>k(e,3),message:"El usuario requiere al menos tres caracteres."},{validation:e=>z(e),message:"El usuario debe ser un correo válido."}]},password:{rules:[{validation:e=>x(e),message:"El password es obligatorio."},{validation:e=>k(e,3),message:"El password requiere al menos tres caracteres."}]}},M={username:"",password:""},p=e=>(q("data-v-70ea44d1"),e=e(),B(),e),R={class:"container-login100"},Z={key:0,class:"wrap-login100"},$={class:"title-login app-pointer"},O={class:"app-desc"},j=p(()=>s("div",{class:"pl-5 pr-5"},[s("hr",{class:"red"})],-1)),G={class:"login100-form"},J={key:0,class:"alert alert-danger mb-4",role:"alert"},K={class:"col-md-12 p-0"},Q=p(()=>s("label",{for:"usuario",class:"form-label"},"Usuario",-1)),W={key:0,class:"app-validation"},X={class:"col-md-12 p-0"},Y=p(()=>s("label",{for:"password",class:"form-label"},"Contraseña",-1)),ee={key:0,class:"app-validation"},se=p(()=>s("div",{class:"forgot-pass"},[s("a",{href:"#"}," ¿Ha olvídado tu contraseña? ")],-1)),ae={key:0,class:"login-message"},oe=C({__name:"LoginView",setup(e){const c=F(),v=_(!1),h=_(""),i=_(!1),o=L(M),{isValid:I,errors:t}=U(o,H),S=()=>{I.value&&(i.value=!1,c.login(o.username,o.password).then(f=>{f?g.push({name:"home"}):g.push({name:"login"})}).catch(()=>{i.value=!0,v.value=!0,h.value="Hubo un problema al iniciar sesión. Favor de verificar sus credenciales e intentar de nuevo.",g.push({name:"login"})}))};return N(()=>{i.value=!0}),(f,u)=>(r(),n("div",R,[w(y,{name:"login"},{default:b(()=>[i.value?(r(),n("div",Z,[s("h4",$,[T(l(a(A))+" ",1),s("span",O,l(a(P)),1)]),j,s("form",G,[v.value?(r(),n("div",J,l(h.value),1)):d("",!0),s("div",K,[Q,V(s("input",{type:"email",id:"usuario","onUpdate:modelValue":u[0]||(u[0]=m=>o.username=m),class:"form-control",autocomplete:"off",placeholder:"Nombre de usuario"},null,512),[[E,o.username]]),a(t)&&a(t).username?(r(),n("small",W,l(a(t).username),1)):d("",!0)]),s("div",X,[Y,V(s("input",{type:"password","onUpdate:modelValue":u[1]||(u[1]=m=>o.password=m),id:"password",class:"form-control",autocomplete:"off",placeholder:"Contraseña"},null,512),[[E,o.password]]),a(t)&&a(t).password?(r(),n("small",ee,l(a(t).password),1)):d("",!0)]),se,s("div",{className:"buttons-login text-end"},[s("button",{class:"btn btn-primary",type:"button",onClick:S}," Iniciar sesión ")])])])):d("",!0)]),_:1}),w(y,{name:"login-message"},{default:b(()=>[i.value?d("",!0):(r(),n("div",ae," Iniciando Sesión. Espere... "))]),_:1})]))}});const le=D(oe,[["__scopeId","data-v-70ea44d1"]]);export{le as default};
