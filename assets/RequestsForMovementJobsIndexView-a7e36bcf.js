import{r as i,d as F,i as I,a as N,j as E,w as m,T as J,o as f,c as k,b as e,t as z,e as r,u as p,g as A,n as P,k as R,q as b,p as j,h as $,_ as L}from"./index-878fd94d.js";import{u as G}from"./useRequestsForMovementJobs-a30a6424.js";import{D as H}from"./DataTableComponent-6ec1e858.js";import{B as K}from"./ButtonBarComponent-573bc428.js";import{g as Q,b as W}from"./api-e27444fc.js";import{u as X}from"./useUnits-c72a8e9c.js";import{_ as Y,N as x}from"./NoOptionsComponent-454d43df.js";import{C as Z,p as ee}from"./paginationHelper-8171a740.js";const te="cat_rh_estatus/",oe=()=>{const t=i({...Z});return{statusRh:t,searchEstatusRh:async(d="",c=1,v=!1,h=!0)=>{try{t.value.loading=!0;const a=await Q(`${te}`,{page:c,search:d,page_size:t.value.pagination.page_size,paginate:h,tabla:"Sol_Afectacion"},v);return t.value.data=a.results,t.value.pagination=ee(t.value.pagination,c,a.count),t.value.loading=!1,Promise.resolve(a.results)}catch(a){return console.error(a),console.log("Error al estatus rh",a),Promise.reject(a)}}}},se=oe,ae=t=>t.unidad!==""&&t.unidad!==null||t.estatus!==""&&t.estatus!==null||t.anio!==""&&t.anio!==null,g=t=>(j("data-v-a4d83990"),t=t(),$(),t),ne={key:0},le=g(()=>e("hr",{class:"red"},null,-1)),ie={class:"row app-options-bar"},re={class:"col-12 buttons-component"},ce={class:"requests-bar"},ue=g(()=>e("h5",null,"Criterios de Búsqueda",-1)),de={class:"row m-0"},me={class:"col-md-3 col-12 col-sm-12 p-0 buttons-component mb-mobile-10"},pe={class:"col-md-3 col-12 col-sm-12 mb-mobile-10"},ve={class:"col-md-2 col-12 col-sm-12 mb-mobile-10"},he=g(()=>e("div",{class:"col-md-2 col-12 col-sm-12"},[e("ul",{class:"navbar-nav"},[e("li",{class:"nav-item dropdown"},[e("button",{class:"btn btn-primary dropdown-toggle active w-100",role:"button","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"}," Opciones "),e("ul",{class:"dropdown-menu catalogue-dropdown"},[e("li",null,[e("button",{class:"dropdown-item"}," Enviar ")]),e("li",null,[e("button",{class:"dropdown-item"}," Movimientos ")]),e("li",null,[e("button",{class:"dropdown-item"}," Consultar ")]),e("li",null,[e("button",{class:"dropdown-item"}," Validar ")])])])])],-1)),_e="Solicitudes de Movimiento de Plazas",fe=F({__name:"RequestsForMovementJobsIndexView",setup(t){const{requestsForMovementJobs:u,getRequestsForMovementJobs:d,searchRequestsForMovementJobs:c}=G(),{searchEstatusRh:v}=se(),h=i(""),a=i(!1),w=i([]),_=i(!1),S=i([]),y=i(""),n=i({unidad:null,estatus:null,anio:""}),{searchUnits:q}=X(),C=()=>b.push({name:"crear-solicitud-de-movimiento-de-plaza"}),D=o=>b.push({name:"editar-solicitud-de-movimiento-de-plaza",params:{id:o}}),M=o=>b.push({name:"eliminar-solicitud-de-movimiento-de-plaza",params:{id:o}}),O=o=>{ae(n.value)?c(h.value,o,n.value):d({page:o})},T=()=>{c(y.value,1,n.value)},U=W(o=>{o.length>0&&(_.value=!0,q(o,1,!1).then(l=>{w.value=l,_.value=!1}))},350),B=[{title:"No. Solicitud",data:"numero_solicitud",align:"center"},{title:"Tipo Doc.",data:"tipo_documento",align:"center"},{title:"Justificación",data:"justificacion_solicitud",align:"left"},{title:"Es Afectación",data:"es_afectacion",align:"center"},{title:"Es Directa",data:"es_directa",align:"center"}];return I(()=>{d({page:1}).then(()=>a.value=!0),v("",1,!1,!1).then(o=>S.value=o)}),(o,l)=>{const V=N("v-select");return f(),E(J,{name:"view"},{default:m(()=>[a.value?(f(),k("div",ne,[e("h4",{class:"view-name"},z(_e)),le,e("div",ie,[e("div",re,[r(K,{onOnCreate:C})])]),e("div",ce,[ue,e("div",de,[e("div",me,[r(V,{loading:_.value,modelValue:n.value.unidad,"onUpdate:modelValue":l[0]||(l[0]=s=>n.value.unidad=s),reduce:s=>s.clave,options:w.value,placeholder:"Unidad administrativa",filterable:!1,onSearch:p(U),label:"nombre",class:"style-v-select form-select form-control height-custom"},{spinner:m(({loading:s})=>[r(Y,{loading:s},null,8,["loading"])]),"no-options":m(()=>[r(x)]),_:1},8,["loading","modelValue","reduce","options","onSearch"])]),e("div",pe,[r(V,{modelValue:n.value.estatus,"onUpdate:modelValue":l[1]||(l[1]=s=>n.value.estatus=s),reduce:s=>s.id,options:S.value,placeholder:"Estatus",label:"descripcion",class:"style-v-select form-select form-control height-custom"},{"no-options":m(()=>[r(x)]),_:1},8,["modelValue","reduce","options"])]),e("div",ve,[A(e("input",{name:"anio",type:"number",class:"form-control height-custom",placeholder:"Año","onUpdate:modelValue":l[2]||(l[2]=s=>n.value.anio=s)},null,512),[[P,n.value.anio]])]),e("div",{class:"col-md-2 col-12 col-sm-12 mb-mobile-10"},[e("button",{class:"btn btn-secondary active w-100",role:"button","data-toggle":"dropdown",onClick:T,"aria-haspopup":"true","aria-expanded":"false"}," Buscar ")]),he])]),p(u).loading?R("",!0):(f(),E(H,{key:0,rowId:"id",columns:B,data:p(u).data,pagination:p(u).pagination,showDelete:"",showEdit:"",onOnPaginate:O,onOnEdit:D,onOnDelete:M,onOnCreate:C},null,8,["data","pagination"]))])):R("",!0)]),_:1})}}});const xe=L(fe,[["__scopeId","data-v-a4d83990"]]);export{xe as default};
