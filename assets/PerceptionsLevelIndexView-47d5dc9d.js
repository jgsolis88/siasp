import{r as _,d as R,m as $,q as f,w as N,T as S,o as m,c as T,b as l,t as j,e as w,u as g,k as E,y as h}from"./index-1b3fb38e.js";import{g as P,p as k,d as q,a as z}from"./api-fdc0db9b.js";import{C as A,p as C}from"./paginationHelper-8171a740.js";import{D as I}from"./DataTableComponent-17c6673e.js";import{S as V,u as b}from"./useReports-a24f5639.js";import{B as F}from"./ButtonBarComponent-dfe0b8a4.js";const n="cat_puesto/",G=()=>{const o=_({...A});return{perceptionsLevel:o,getPerceptionsLevel:async({page:t=1})=>{try{o.value.loading=!0;const e=await P(`${n}`,{page:t,page_size:o.value.pagination.page_size});return o.value.data=e.results,o.value.pagination=C(o.value.pagination,t,e.count),o.value.loading=!1,Promise.resolve(e.results)}catch(e){return console.error(e),console.log("Error al cargar los puestos",e),Promise.reject(e)}},savePerceptionLevel:async t=>{try{const e=await k(n,t);return Promise.resolve(e)}catch(e){return console.error(e),console.log("Error al guardar el nuevo puesto",e),Promise.reject(e)}},deletePerceptionLevel:async t=>{try{const e=await q(`${n}`,t);return Promise.resolve(e)}catch(e){return console.error(e),console.log("Error al eliminar el puesto",e),Promise.reject(e)}},updatePerceptionLevel:async t=>{try{console.log(t.clave);const e=await z(`${n}`,t.clave,t);return Promise.resolve(e)}catch(e){return console.error(e),console.log("Error al guardar el nuevo puesto",e),Promise.reject(e)}},getPerceptionLevelById:async t=>{try{const e=await P(`${n}${t}/`);return Promise.resolve(e)}catch(e){return console.error(e),console.log("Error al cargar puesto",e),Promise.reject(e)}},searchPerceptionsLevel:async(t="",e=1,d=!0)=>{try{o.value.loading=!0;const a=await P(`${n}`,{page:e,search:t,page_size:o.value.pagination.page_size},d);return o.value.data=a.results,o.value.pagination=C(o.value.pagination,e,a.count),o.value.loading=!1,Promise.resolve(a.results)}catch(a){return console.error(a),console.log("Error al cargar puestos",a),Promise.reject(a)}}}},M={key:0},U=l("hr",{class:"red"},null,-1),H={class:"row app-options-bar"},J={class:"col buttons-component"},K={class:"col search-component"},O="Percepciones por nivel",te=R({__name:"PerceptionsLevelIndexView",setup(o){const{perceptionsLevel:c,getPerceptionsLevel:p,searchPerceptionsLevel:u}=G(),{exportReport:y}=b(),i=_(""),v=_(!1),t=()=>h.push({name:"crear-puesto"}),e=r=>h.push({name:"editar-puesto",params:{id:r}}),d=r=>h.push({name:"eliminar-puesto",params:{id:r}}),a=r=>{i.value?u(i.value,r):p({page:r})},x=r=>{i.value=r,u(r,1)},L=r=>{y(r,"cat_puesto",O)},B=[{title:"Nivel",data:"clave",align:"center"},{title:"Región",data:"nivel",align:"center"},{title:"Escala",data:"clave",align:"left"},{title:"Sueldo",data:"nivel",align:"center"},{title:"Compensación/Asig",data:"nivel",align:"center"},{title:"Ayuda de gastos de actualización",data:"clave",align:"center"}];return $(async()=>{p({page:1}).then(()=>v.value=!0)}),(r,s)=>(m(),f(S,{name:"view"},{default:N(()=>[v.value?(m(),T("div",M,[l("h4",{class:"view-name"},j(O)),U,l("div",H,[l("div",J,[w(F,{onOnCreate:t,onOnExcel:s[0]||(s[0]=D=>L("xlsx")),onOnPdf:s[1]||(s[1]=D=>L("pdf"))})]),l("div",K,[w(V,{onOnSearch:x})])]),g(c).loading?E("",!0):(m(),f(I,{key:0,rowId:"clave",columns:B,data:g(c).data,pagination:g(c).pagination,showDelete:"",showEdit:"",onOnPaginate:a,onOnEdit:e,onOnDelete:d,onOnCreate:t},null,8,["data","pagination"]))])):E("",!0)]),_:1}))}});export{te as default};
