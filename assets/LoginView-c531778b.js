import{d as C,r as m,l as L,i as N,c as r,e as h,w,T as b,o as i,b as e,f as T,t as n,u as a,A as P,m as A,k as d,g as y,n as V,q as _,p as q,h as B,_ as D}from"./index-07ca7dee.js";import{u as F}from"./authenticationStore-fff88476.js";import{u as U}from"./useFormValidation-0614fa30.js";import{v as E,a as k,b as H}from"./validationHelper-22c07218.js";import"./api-93b42a31.js";const M={username:{rules:[{validation:s=>E(s),message:"El usuario es obligatorio."},{validation:s=>k(s,3),message:"El usuario requiere al menos tres caracteres."},{validation:s=>H(s),message:"El usuario debe ser un correo válido."}]},password:{rules:[{validation:s=>E(s),message:"El password es obligatorio."},{validation:s=>k(s,3),message:"El password requiere al menos tres caracteres."}]}},O={username:"",password:""},u=s=>(q("data-v-70ea44d1"),s=s(),B(),s),R={class:"container-login100"},j={key:0,class:"wrap-login100"},z={class:"title-login app-pointer"},G={class:"app-desc"},J=u(()=>e("div",{class:"pl-5 pr-5"},[e("hr",{class:"red"})],-1)),K={class:"login100-form"},Q={key:0,class:"alert alert-danger mb-4",role:"alert"},W={class:"col-md-12 p-0"},X=u(()=>e("label",{for:"usuario",class:"form-label"},"Usuario",-1)),Y={key:0,class:"app-validation"},Z={class:"col-md-12 p-0"},$=u(()=>e("label",{for:"password",class:"form-label"},"Contraseña",-1)),ee={key:0,class:"app-validation"},se=u(()=>e("div",{class:"forgot-pass"},[e("a",{href:"#"}," ¿Ha olvídado tu contraseña? ")],-1)),ae={key:0,class:"login-message"},oe=C({__name:"LoginView",setup(s){const I=F(),v=m(!1),f=m(""),l=m(!1),o=L(O),{isValid:x,errors:t}=U(o,M),S=()=>{x.value&&(l.value=!1,I.login(o.username,o.password).then(g=>{g?_.push({name:"home"}):_.push({name:"login"})}).catch(()=>{l.value=!0,v.value=!0,f.value="Hubo un problema al iniciar sesión. Favor de verificar sus credenciales e intentar de nuevo.",_.push({name:"login"})}))};return N(()=>{l.value=!0}),(g,c)=>(i(),r("div",R,[h(b,{name:"login"},{default:w(()=>[l.value?(i(),r("div",j,[e("h4",z,[T(n(a(P))+" ",1),e("span",G,n(a(A)),1)]),J,e("form",K,[v.value?(i(),r("div",Q,n(f.value),1)):d("",!0),e("div",W,[X,y(e("input",{type:"email",id:"usuario","onUpdate:modelValue":c[0]||(c[0]=p=>o.username=p),class:"form-control",autocomplete:"off",placeholder:"Nombre de usuario"},null,512),[[V,o.username]]),a(t)&&a(t).username?(i(),r("small",Y,n(a(t).username),1)):d("",!0)]),e("div",Z,[$,y(e("input",{type:"password","onUpdate:modelValue":c[1]||(c[1]=p=>o.password=p),id:"password",class:"form-control",autocomplete:"off",placeholder:"Contraseña"},null,512),[[V,o.password]]),a(t)&&a(t).password?(i(),r("small",ee,n(a(t).password),1)):d("",!0)]),se,e("div",{className:"buttons-login text-end"},[e("button",{class:"btn btn-primary",type:"button",onClick:S}," Iniciar sesión ")])])])):d("",!0)]),_:1}),h(b,{name:"login-message"},{default:w(()=>[l.value?d("",!0):(i(),r("div",ae," Iniciando Sesión. Espere... "))]),_:1})]))}});const de=D(oe,[["__scopeId","data-v-70ea44d1"]]);export{de as default};
