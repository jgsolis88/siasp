import{C as w,D as f,E as y,y as g,L as T}from"./index-9519387c.js";const m={mode:"cors",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/json"},method:"GET"},E=()=>"https://sia-sp-backend-production.up.railway.app/api/v1/",R=e=>new Promise(t=>setTimeout(t,e)),$=(e,t,s,n,r)=>{r&&console.log("There was problem processing your request. Check with the sys admin.")},k={...m},q=E(),i=async(e,t,s={},n={},r=!0)=>{const c=w();try{r&&c.initTransaction();let a={...k};a.method=t,f()&&(a.headers.Authorization=`Bearer ${y()}`),Object.keys(s).length>0&&(a.body=JSON.stringify(s));const h=Object.keys(n).map(u=>encodeURIComponent(u)+"="+encodeURIComponent(n[u])).join("&"),p=Object.keys(n).length>0?`${e}?`+h:e,o=await fetch(`${q+p}`,a);if(o.status>=500)throw new Error(`There was a 5xx error on ${e} with method ${t}. Check with the sys admin.`);if(o.status>=400&&o.status!==401&&o.status<500)throw new Error(`There was a 4xx error on ${e} with method ${t}. Check your request.`);if(o.status===401)throw g(),new Error("Please, check your credentials and try again.");const d=o.headers.get("content-type")==="application/json";if(o.headers.get("content-type")=="application/force-download")return c.endTransaction(),o.blob();const l=d?await o.json():{};return await R(T),r&&c.endTransaction(),Promise.resolve(l)}catch(a){return c.endTransaction(),$(e,t,s,n,a),Promise.reject(a)}},C=(e,t={},s=!0)=>i(e,"GET",{},t,s),b=(e="",t={},s=!0)=>i(e,"POST",t,s),O=(e,t,s,n=!0)=>i(`${e}${t}/`,"PUT",s,n),P=(e,t,s=!0)=>i(`${e}${t}/`,"DELETE",{},{},s);export{O as a,P as d,C as g,b as p};
