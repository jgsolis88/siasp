import{r as a,B as j,i as O}from"./index-5c846d88.js";const V=(s,o={})=>{const n=a({}),k=a(!1),u=a({}),f=a({});j(s,()=>{n.value=s,v()},{deep:!0}),O(()=>{n.value=s,Object.keys(s).length>0&&(b(),v())});const v=()=>{const t=Object.keys(s);for(let e of t)if(!(f.value[e]&&!s[e])&&(f.value[e]=!1,o[e])){const r=o[e].rules;for(let c of r)if(c.validation(s[e])){const l={...u.value};delete l[e],u.value=l}else{const l={...u.value};l[e]=c.message,u.value={...l};break}}k.value=d()},d=()=>{let t=!0;const e=Object.keys(o);for(let r of e){const c=o[r].rules;for(let y of c)y.validation(s[r])||(t=!1)}return t},b=()=>{const t=Object.keys(s);for(let e of t)f.value[e]=!0};return{formState:n,isValid:k,errors:u}};export{V as u};
