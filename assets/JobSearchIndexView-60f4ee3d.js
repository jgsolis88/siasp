import{r as v,d as j,o as k,c as J,b as e,K as se,k as P,i as te,a as ae,j as T,w as $,T as ne,t as ie,e as h,u as b,g as _,n as V,S as m}from"./index-9519387c.js";import{u as de}from"./usePositions-ef00e8de.js";import{u as ue}from"./useLevelsArea-44067c4d.js";import{u as re}from"./useSubunitsBudget-7953f1f3.js";import{u as ce}from"./useScalesLevel-fe2293d5.js";import{g as x}from"./api-e3d8e98d.js";import{C as _e,p as A}from"./paginationHelper-8171a740.js";import{D as pe}from"./DataTableComponent-c06c4bc6.js";import{u as ve}from"./useUnits-9e8995f4.js";const L="cat_det_plantilla/",me=()=>{const r=v({..._e}),d=async({page:t=1})=>{try{r.value.loading=!0;const a=await x(`${L}`,{page:t,page_size:r.value.pagination.page_size});return r.value.data=a.results,r.value.pagination=A(r.value.pagination,t,a.count),r.value.loading=!1,Promise.resolve(a.results)}catch(a){return console.error(a),console.log("Error al cargar los resultados",a),Promise.reject(a)}},p=async(t="",a=1,g)=>{try{let u=f(g,a,t);r.value.loading=!0;const w=await x(`${L}`,u);return r.value.data=w.results,r.value.pagination=A(r.value.pagination,a,w.count),r.value.loading=!1,Promise.resolve(w.results)}catch(u){return console.error(u),console.log("Error al obtener resultados",u),Promise.reject(u)}},f=(t,a,g)=>{let u={page:a,search:g,page_size:r.value.pagination.page_size};return t.id_unidad_administrativa!==""&&t.id_unidad_administrativa!==null&&(u.id_unidad_administrativa=t.id_unidad_administrativa),t.id_subunidad_vs_presupuesto!==""&&t.id_subunidad_vs_presupuesto!==null&&(u.id_subunidad_vs_presupuesto=t.id_subunidad_vs_presupuesto),t.id_puesto!==""&&t.id_puesto!==null&&(u.id_puesto=t.id_puesto),t.id_nivel_tabulador!==""&&t.id_nivel_tabulador!==null&&(u.id_nivel_tabulador=t.id_nivel_tabulador),t.id_region!==""&&t.id_region!==null&&(u.id_region=t.id_region),t.id_escala_por_nivel!==""&&t.id_escala_por_nivel!==null&&(u.id_escala_por_nivel=t.id_escala_por_nivel),t.numero_plaza!==""&&t.numero_plaza!==null&&(u.numero_plaza=t.numero_plaza),t.id_codigo_federal_puesto!==""&&t.id_codigo_federal_puesto!==null&&(u.id_codigo_federal_puesto=t.id_codigo_federal_puesto),t.id_estatus!==""&&t.id_estatus!==null&&(u.id_estatus=t.id_estatus),u};return{jobs:r,getJobs:d,searchJobs:p}},fe="reporte_cat_det_plantilla/",be=()=>{const r=async(p="xlsx",f="",t="")=>{try{const a=await x(`${fe}${p}/${f}/${t}`,{});d(a,"reporte_plantilla."+p)}catch(a){return console.error(a),console.log("Error al cargar los resultados",a),Promise.reject(a)}},d=(p,f)=>{const t=window.URL.createObjectURL(p),a=document.createElement("a");a.href=t,a.download=`${f}`,a.dispatchEvent(new MouseEvent("click",{bubbles:!0,cancelable:!0,view:window})),setTimeout(()=>{window.URL.revokeObjectURL(t),a.remove()},100)};return{exportReport:r}},B={id_unidad_administrativa:"",id_subunidad_vs_presupuesto:"",id_puesto:"",id_nivel_tabulador:"",id_region:"",id_escala_por_nivel:"",numero_plaza:"",nombre:"",apellido_paterno:"",apellido_materno:"",id_codigo_federal_puesto:"",id_estatus:""},he={key:0,class:"modal"},ge={class:"modal-content"},ye=j({__name:"ModalComponent",setup(r,{expose:d}){const p=v(!1);return d({openModal:()=>{p.value=!0},closeModal:()=>{p.value=!1}}),(a,g)=>p.value?(k(),J("div",he,[e("div",ge,[se(a.$slots,"default")])])):P("",!0)}});const we={key:0},Se=e("hr",{class:"red"},null,-1),Ve={class:"row"},ke={class:"col-md-12"},Ue={class:"form-group p-4"},Pe=e("legend",null,"Criterios de búsqueda",-1),xe={class:"row"},Ce={class:"col-md-4"},Ee={class:"row"},ze={class:"col-md-12 form-group"},Me=e("label",null,"Unidad Administrativa",-1),Ne={class:"col-md-12 form-group"},Re=e("label",null,"Subunidad",-1),Oe={class:"col-md-12 form-group"},Te=e("label",null,"Puesto",-1),$e={class:"col-md-12 form-group"},Ae=e("label",null,"Nivel",-1),Le={class:"col-md-12 form-group"},Be=e("label",null,"No. Plaza",-1),je={class:"col-md-4"},Je={class:"row"},De={class:"col-md-12 form-group"},Fe=e("label",null,"Región",-1),Ie={class:"col-md-12 form-group"},qe=e("label",null,"Escala",-1),Ge={class:"col-md-12 form-group"},Ke=e("label",null,"Nombre(s)",-1),He={class:"col-md-12 form-group"},Qe=e("label",null,"Apellido Paterno",-1),We={class:"col-md-12 form-group"},Xe=e("label",null,"Apellido Materno",-1),Ye={class:"col-md-4"},Ze={class:"row"},eo=e("div",{class:"col-md-12 form-group"},[e("label",null,"Plaza"),e("input",{type:"text",class:"form-control",placeholder:"Busca por plaza",autocomplete:"off"})],-1),oo={class:"col-md-12 form-group"},lo=e("label",null,"CFP",-1),so={class:"row"},to={class:"col-md-12"},ao=e("div",{class:"row"},[e("div",{class:"col-md-12"},[e("label",null,"Estatus")])],-1),no={class:"row"},io={class:"col-md-6"},uo={class:"row"},ro={class:"col-md-12 form-group"},co={class:"form-check"},_o=e("label",{class:"form-check-label",for:"occupied"}," Ocupadas ",-1),po={class:"col-md-12 form-group"},vo={class:"form-check"},mo=e("label",{class:"form-check-label",for:"occupied"}," Vacantes ",-1),fo={class:"col-md-6"},bo={class:"row"},ho={class:"col-md-12 form-group"},go={class:"form-check"},yo=e("label",{class:"form-check-label",for:"occupied"}," Canceladas ",-1),wo={class:"col-md-12"},So={class:"form-check"},Vo=e("label",{class:"form-check-label",for:"occupied"}," En Trámite ",-1),ko=e("button",{title:"Meta 4",class:"dt-button buttons-meta btn btn-secondary btn-meta",disabled:""},[e("span",null,[e("i",{class:"bi bi-arrow-repeat"})])],-1),Uo=e("span",null,[e("i",{class:"bi bi-printer"})],-1),Po=[Uo],xo=e("span",null,[e("i",{class:"bi bi-arrow-counterclockwise"})],-1),Co=[xo],Eo=e("div",{class:"row"},[e("div",{class:"col-md-12"},[e("h4",null,"Reporte de Plantilla")])],-1),zo={class:"row form-group"},Mo={class:"col-md-12"},No=e("label",null,"Unidad Administrativa",-1),Ro={class:"row form-group"},Oo={class:"col-md-12 form-group"},To={class:"form-check"},$o=e("label",{class:"form-check-label",for:"occupied"}," Ocupadas y vacantes ",-1),Ao={class:"col-md-12 form-group"},Lo={class:"form-check"},Bo=e("label",{class:"form-check-label",for:"occupied"}," Ocupadas ",-1),jo={class:"col-md-12 form-group"},Jo={class:"form-check"},Do=e("label",{class:"form-check-label",for:"vacancies"}," Vacantes ",-1),Fo={class:"col-md-12 form-group"},Io={class:"form-check"},qo=e("label",{class:"form-check-label",for:"canceled"}," Canceladas ",-1),Go={class:"col-md-12 form-group"},Ko={class:"form-check"},Ho=e("label",{class:"form-check-label",for:"in_process"}," En Trámite ",-1),Qo={class:"col-md-12 form-group"},Wo={class:"form-check"},Xo=e("label",{class:"form-check-label",for:"all"}," Todas ",-1),Yo={class:"row buttons-content"},Zo={class:"col-md-12"},el="Búsqueda de Plazas",rl=j({__name:"JobSearchIndexView",setup(r){const d=v(null),p=v(!1),{getJobs:f,searchJobs:t,jobs:a}=me(),{exportReport:g}=be(),{searchPositions:u}=de(),{searchLevelsArea:w}=ue(),{searchSubunitsBudget:D}=re(),{searchScalesLevel:F}=ce(),{searchUnits:I}=ve(),C=v([]),E=v([]),z=v([]),M=v([]),U=v([]),N=v(""),y=v(""),c=v(""),q=[{id:1,label:"Norte"},{id:2,label:"Sur"},{id:3,label:"Centro"}],s=v({...B}),G=()=>{s.value={...B}},K=n=>{Q()?t(N.value,n,s.value):f({page:n})},H=()=>{t(N.value,1,s.value)},Q=()=>s.value.id_unidad_administrativa!==""&&s.value.id_unidad_administrativa!==null||s.value.id_subunidad_vs_presupuesto!==""&&s.value.id_subunidad_vs_presupuesto!==null||s.value.id_puesto!==""&&s.value.id_puesto!==null||s.value.id_nivel_tabulador!==""&&s.value.id_nivel_tabulador!==null||s.value.id_region!==""&&s.value.id_region!==null||s.value.id_escala_por_nivel!==""&&s.value.id_escala_por_nivel!==null||s.value.numero_plaza!==""&&s.value.numero_plaza!==null||s.value.id_codigo_federal_puesto!==""&&s.value.id_codigo_federal_puesto!==null||s.value.id_estatus!==""&&s.value.id_estatus!==null,W=()=>{d&&d.value&&d.value.openModal()},X=()=>{y.value="",c.value="",d&&d.value&&d.value.closeModal()},R=n=>{y.value!==""&&y.value!==null&&c.value!==""&&(d&&d.value&&d.value.closeModal(),g(n,c.value,y.value).then(()=>{d&&d.value&&d.value.openModal()}))},S=(n,l)=>{let i;return(...o)=>{clearTimeout(i),i=setTimeout(()=>{n(...o)},l)}},O=S((n,l)=>{n.length>2&&I(n,1,!1).then(i=>{U.value=i})},350),Y=S((n,l)=>{n.length>2&&u(n,1,!1).then(i=>{C.value=i})},350),Z=S((n,l)=>{n.length>2&&D(n,1,!1).then(i=>{E.value=i})},350),ee=S((n,l)=>{n.length>2&&w(n,1,!1).then(i=>{z.value=i})},350),oe=S((n,l)=>{n.length>2&&F(n,1,!1).then(i=>{M.value=i})},350),le=[{title:"No. Plaza",data:"numero_plaza",align:"left"},{title:"Cod. Fed de Pto",data:"id_codigo_federal_puesto",align:"left"},{title:"Unidad Adm.",data:"id_unidad_administrativa",align:"left"},{title:"Subunidad",data:"proyecto_subunidad",align:"left"},{title:"Puesto",data:"id_puesto",align:"left"},{title:"Nivel",data:"clave_nivel_tabulador",align:"left"},{title:"Region",data:"id_region",align:"left"},{title:"Escala",data:"descripcion_escala_por_nivel",align:"left"},{title:"Estatus Puesto",data:"id_estatus",align:"left"},{title:"No. Empleado",data:"id_empleado",align:"left"}];return te(()=>{f({page:1}).then(()=>p.value=!0)}),(n,l)=>{const i=ae("v-select");return k(),T(ne,{name:"view"},{default:$(()=>[p.value?(k(),J("div",we,[e("h4",{class:"view-name"},ie(el)),Se,e("div",Ve,[e("div",ke,[e("fieldset",Ue,[Pe,e("div",xe,[e("div",Ce,[e("div",Ee,[e("div",ze,[Me,h(i,{reduce:o=>o.clave,modelValue:s.value.id_unidad_administrativa,"onUpdate:modelValue":l[0]||(l[0]=o=>s.value.id_unidad_administrativa=o),options:U.value,label:"nombre",filterable:!1,onSearch:b(O),placeholder:"Selecciona una opción",class:"style-v-select form-select form-control"},null,8,["reduce","modelValue","options","onSearch"])]),e("div",Ne,[Re,h(i,{reduce:o=>o.id,modelValue:s.value.id_subunidad_vs_presupuesto,"onUpdate:modelValue":l[1]||(l[1]=o=>s.value.id_subunidad_vs_presupuesto=o),filterable:!1,options:E.value,label:"proyecto",onSearch:b(Z),placeholder:"Selecciona una opción",class:"style-v-select form-select form-control"},null,8,["reduce","modelValue","options","onSearch"])]),e("div",Oe,[Te,h(i,{reduce:o=>o.id,modelValue:s.value.id_puesto,"onUpdate:modelValue":l[2]||(l[2]=o=>s.value.id_puesto=o),filterable:!1,options:C.value,label:"descripcion",onSearch:b(Y),placeholder:"Selecciona una opción",class:"style-v-select form-select form-control"},null,8,["reduce","modelValue","options","onSearch"])]),e("div",$e,[Ae,h(i,{reduce:o=>o.id,modelValue:s.value.id_nivel_tabulador,"onUpdate:modelValue":l[3]||(l[3]=o=>s.value.id_nivel_tabulador=o),filterable:!1,options:z.value,label:"descripcion",onSearch:b(ee),placeholder:"Selecciona una opción",class:"style-v-select form-select form-control"},null,8,["reduce","modelValue","options","onSearch"])]),e("div",Le,[Be,_(e("input",{"onUpdate:modelValue":l[4]||(l[4]=o=>s.value.numero_plaza=o),type:"number",class:"form-control",placeholder:"No. Plaza",autocomplete:"off"},null,512),[[V,s.value.numero_plaza]])])])]),e("div",je,[e("div",Je,[e("div",De,[Fe,h(i,{reduce:o=>o.id,modelValue:s.value.id_region,"onUpdate:modelValue":l[5]||(l[5]=o=>s.value.id_region=o),options:q,placeholder:"Selecciona una opción",class:"style-v-select form-select form-control"},null,8,["reduce","modelValue"])]),e("div",Ie,[qe,h(i,{reduce:o=>o.id,modelValue:s.value.id_escala_por_nivel,"onUpdate:modelValue":l[6]||(l[6]=o=>s.value.id_escala_por_nivel=o),filterable:!1,options:M.value,label:"descripcion",onSearch:b(oe),placeholder:"Selecciona una opción",class:"style-v-select form-select form-control"},null,8,["reduce","modelValue","options","onSearch"])]),e("div",Ge,[Ke,_(e("input",{"onUpdate:modelValue":l[7]||(l[7]=o=>s.value.nombre=o),type:"text",class:"form-control",placeholder:"Nombre(s)",autocomplete:"off"},null,512),[[V,s.value.nombre]])]),e("div",He,[Qe,_(e("input",{"onUpdate:modelValue":l[8]||(l[8]=o=>s.value.apellido_paterno=o),type:"text",class:"form-control",placeholder:"Paterno",autocomplete:"off"},null,512),[[V,s.value.apellido_paterno]])]),e("div",We,[Xe,_(e("input",{"onUpdate:modelValue":l[9]||(l[9]=o=>s.value.apellido_materno=o),type:"text",class:"form-control",placeholder:"Materno",autocomplete:"off"},null,512),[[V,s.value.apellido_materno]])])])]),e("div",Ye,[e("div",Ze,[eo,e("div",oo,[lo,_(e("input",{"onUpdate:modelValue":l[10]||(l[10]=o=>s.value.id_codigo_federal_puesto=o),type:"text",class:"form-control",placeholder:"Busca por CFP",autocomplete:"off"},null,512),[[V,s.value.id_codigo_federal_puesto]])])]),e("div",so,[e("div",to,[ao,e("div",no,[e("div",io,[e("div",uo,[e("div",ro,[e("div",co,[_(e("input",{type:"radio",name:"id_status",value:"1","onUpdate:modelValue":l[11]||(l[11]=o=>s.value.id_estatus=o)},null,512),[[m,s.value.id_estatus]]),_o])]),e("div",po,[e("div",vo,[_(e("input",{type:"radio",name:"id_status",value:"3","onUpdate:modelValue":l[12]||(l[12]=o=>s.value.id_estatus=o)},null,512),[[m,s.value.id_estatus]]),mo])])])]),e("div",fo,[e("div",bo,[e("div",ho,[e("div",go,[_(e("input",{type:"radio",name:"id_status",value:"10","onUpdate:modelValue":l[13]||(l[13]=o=>s.value.id_estatus=o)},null,512),[[m,s.value.id_estatus]]),yo])]),e("div",wo,[e("div",So,[_(e("input",{type:"radio",name:"id_status",value:"8","onUpdate:modelValue":l[14]||(l[14]=o=>s.value.id_estatus=o)},null,512),[[m,s.value.id_estatus]]),Vo])])])])])])]),e("div",{class:"row buttons-content"},[e("div",{class:"col-md-12"},[e("div",{class:"row"},[ko,e("button",{onClick:W,title:"Imprimir",class:"dt-button buttons-print btn btn-secondary btn-imprimir"},Po),e("button",{onClick:G,title:"Reiniciar filtros",class:"dt-button buttons-print btn btn-secondary btn-reiniciar"},Co),e("button",{class:"btn btn-primary active",onClick:H},"Buscar")])])])])])]),b(a).loading?P("",!0):(k(),T(pe,{key:0,showColumnActions:!1,rowId:"clave",columns:le,data:b(a).data,pagination:b(a).pagination,onOnPaginate:K},null,8,["data","pagination"])),h(ye,{ref_key:"modalRef",ref:d},{default:$(()=>[Eo,e("div",zo,[e("div",Mo,[No,h(i,{reduce:o=>o.clave,modelValue:y.value,"onUpdate:modelValue":l[15]||(l[15]=o=>y.value=o),options:U.value,label:"nombre",filterable:!1,onSearch:b(O),placeholder:"Selecciona una opción",class:"style-v-select form-select form-control"},null,8,["reduce","modelValue","options","onSearch"])])]),e("div",Ro,[e("div",Oo,[e("div",To,[_(e("input",{type:"radio",name:"occupied",id:"occupied","onUpdate:modelValue":l[16]||(l[16]=o=>c.value=o),value:"ocupadas_vacantes"},null,512),[[m,c.value]]),$o])]),e("div",Ao,[e("div",Lo,[_(e("input",{type:"radio",name:"occupied",id:"occupied","onUpdate:modelValue":l[17]||(l[17]=o=>c.value=o),value:"ocupadas"},null,512),[[m,c.value]]),Bo])]),e("div",jo,[e("div",Jo,[_(e("input",{type:"radio",name:"vacancies",id:"vacancies","onUpdate:modelValue":l[18]||(l[18]=o=>c.value=o),value:"vacantes"},null,512),[[m,c.value]]),Do])]),e("div",Fo,[e("div",Io,[_(e("input",{type:"radio",name:"canceled",id:"canceled","onUpdate:modelValue":l[19]||(l[19]=o=>c.value=o),value:"canceladas"},null,512),[[m,c.value]]),qo])]),e("div",Go,[e("div",Ko,[_(e("input",{type:"radio",name:"in_process",id:"in_process","onUpdate:modelValue":l[20]||(l[20]=o=>c.value=o),value:"en_tramite"},null,512),[[m,c.value]]),Ho])]),e("div",Qo,[e("div",Wo,[_(e("input",{type:"radio",name:"all",id:"all","onUpdate:modelValue":l[21]||(l[21]=o=>c.value=o),value:"todas"},null,512),[[m,c.value]]),Xo])])]),e("div",Yo,[e("div",Zo,[e("button",{type:"button",class:"btn btn-primary",onClick:l[22]||(l[22]=o=>R("xlsx"))},"Exportar Excel"),e("button",{type:"button",class:"btn btn-primary",onClick:l[23]||(l[23]=o=>R("pdf"))},"Exportar PDF"),e("button",{type:"button",class:"btn btn-secondary",onClick:X},"Cerrar")])])]),_:1},512)])])])):P("",!0)]),_:1})}}});export{rl as default};
