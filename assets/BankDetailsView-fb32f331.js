import{d as z,r as m,i as C,q as p,j as T,w as q,T as E,o as r,c as i,b as e,t as v,g as f,n as _,u as l,k as u,B as I}from"./index-9519387c.js";import{s as D}from"./scrollHelper-62f64ba1.js";import{u as M}from"./useBanks-85a80bda.js";import{u as N}from"./useFormValidation-a830d579.js";import{d as U}from"./bankModel-31106ba2.js";import"./api-e3d8e98d.js";import"./paginationHelper-8171a740.js";const S={nombre:{rules:[{validation:t=>t&&t.length>0,message:"El nombre es requerido."},{validation:t=>t&&t.length>3,message:"El nombre debe tener al menos tres caracteres."}]},descripcion:{rules:[{validation:t=>t&&t.length>0,message:"La descripci贸n es requerida."},{validation:t=>t&&t.length>3,message:"La descripci贸n debe tener al menos tres caracteres."}]}},F={key:0},L={class:"view-name"},R=e("hr",{class:"red"},null,-1),j={class:"p-4"},A={key:0,class:"form-group"},G=e("label",{for:"clave"},"Clave",-1),H={key:0,id:"clave-small",class:"form-text text-muted app-validation"},J={class:"form-group"},K=e("label",{for:"nombre-operacion"},"Nombre",-1),O={key:0,id:"name-nivel-small",class:"form-text text-muted app-validation"},P={class:"form-group"},Q=e("label",{for:"nombre-operacion"},"Descripci贸n",-1),W={key:0,id:"descripcion-nivel-small",class:"form-text text-muted app-validation"},X={class:"form-check"},Y=e("label",{class:"form-check-label pl-4",for:"nombre"},"Es sucursal",-1),Z={key:1,class:"form-text text-muted app-form-message"},ne=z({__name:"BankDetailsView",setup(t){const k=m("Registrar Banco"),{saveBank:g,updateBank:x,getBankById:y}=M(),c=m(""),b=m(!1),d=m(!1),a=m({...U}),{isValid:B,errors:o}=N(a.value,S),V=()=>{p.push({name:"listar-bancos"})},w=()=>{B.value&&(c.value?x(c.value,{...a.value}).then(()=>{p.push({name:"listar-bancos"})}).catch(()=>{d.value=!0,setTimeout(()=>{d.value=!1},3e3)}):g({...a.value}).then(()=>{p.push({name:"listar-bancos"})}).catch(()=>{d.value=!0,setTimeout(()=>{d.value=!1},3e3)}))};return C(()=>{var h;c.value=(h=p.currentRoute.value.params.id)==null?void 0:h.toString(),c.value?(k.value="Actualizar Banco",y(c.value).then(s=>{a.value.nombre=s.nombre,a.value.descripcion=s.descripcion,a.value.sucursal_plaza=s.sucursal_plaza,a.value.clave=s.clave,b.value=!0})):b.value=!0,D()}),(h,s)=>(r(),T(E,{name:"view"},{default:q(()=>[b.value?(r(),i("div",F,[e("h4",L,v(k.value),1),R,e("form",j,[c.value?u("",!0):(r(),i("div",A,[G,f(e("input",{type:"text","onUpdate:modelValue":s[0]||(s[0]=n=>a.value.clave=n),class:"form-control",id:"clave",placeholder:"Introduzca la clave",autocomplete:"off"},null,512),[[_,a.value.clave]]),l(o)&&l(o).clave?(r(),i("small",H,v(l(o).clave),1)):u("",!0)])),e("div",J,[K,f(e("input",{type:"text","onUpdate:modelValue":s[1]||(s[1]=n=>a.value.nombre=n),class:"form-control",id:"name-bank",placeholder:"Introduzca el nombre",autocomplete:"off"},null,512),[[_,a.value.nombre]]),l(o)&&l(o).nombre?(r(),i("small",O,v(l(o).nombre),1)):u("",!0)]),e("div",P,[Q,f(e("input",{type:"text","onUpdate:modelValue":s[2]||(s[2]=n=>a.value.descripcion=n),class:"form-control",id:"description-bank",placeholder:"Introduzca la descripci贸n",autocomplete:"off"},null,512),[[_,a.value.descripcion]]),l(o)&&l(o).descripcion?(r(),i("small",W,v(l(o).descripcion),1)):u("",!0)]),e("div",X,[f(e("input",{class:"form-check-input",placeholder:"Es sucursal",name:"sucursal_plaza",id:"sucursal_plaza",type:"checkbox","onUpdate:modelValue":s[3]||(s[3]=n=>a.value.sucursal_plaza=n)},null,512),[[I,a.value.sucursal_plaza]]),Y]),e("div",{class:"modal-footer"},[e("button",{type:"button",class:"btn btn-secondary",onClick:V}," Cancelar "),e("button",{type:"button",onClick:w,class:"btn btn-primary"}," Guardar ")]),d.value?(r(),i("small",Z," Verifique que los datos esten correctos, o no haya sido registrado previamiente. ")):u("",!0)])])):u("",!0)]),_:1}))}});export{ne as default};
