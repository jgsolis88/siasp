import{d as B,r as l,i as k,q as r,j as T,w as C,T as N,o as n,c as d,b as e,t as p,g as v,z as _,F as x,N as F,u as q,k as f}from"./index-1e327b80.js";import{s as D}from"./scrollHelper-62f64ba1.js";import{u as E}from"./useValidRegionsByState-671dce49.js";import{u as L}from"./useLevelsTab-aa703190.js";import{u as M}from"./useFormValidation-27ff36c1.js";import{d as U}from"./validRegionByStateModel-d3006d60.js";import"./api-db4911ba.js";import"./paginationHelper-8171a740.js";const z={id_estado:{rules:[]}},A={key:0},P={class:"view-name"},j=e("hr",{class:"red"},null,-1),G={class:"p-4"},I={class:"form-group"},H=e("label",{for:"clave-nivel"},"Estado",-1),J=e("option",{value:"0"},"Selecciona una opción",-1),K=e("option",{value:"1"}," Estado de Prueba ",-1),O=[J,K],Q={class:"form-group"},W=e("label",{for:"descripcion-nivel"},"Nivel Tabulador",-1),X=e("option",{value:"0"},"Selecciona una opción",-1),Y=["value"],Z={class:"form-group"},$=e("label",{for:"descripcion-nivel"},"Región",-1),ee=e("option",{value:"0"},"Selecciona una opción",-1),ae=e("option",{value:"1"}," Región de Prueba ",-1),te=[ee,ae],oe={key:0,class:"form-text text-muted app-form-message"},_e=B({__name:"ValidRegionsByStateDetailView",setup(se){const m=l("Registrar Región válida por estado"),{updateValidRegionByState:h,getValidRegionByState:g,saveValidRegionByState:b}=E(),s=l(""),u=l(!1),i=l(!1),a=l({...U}),{isValid:V}=M(a.value,z),{levelsTab:y,getAllLevelsTab:S}=L(),R=()=>{r.push({name:"listar-regiones-validas"})},w=()=>{V.value&&(s.value?h(s.value,{...a.value}).then(()=>{r.push({name:"listar-regiones-validas"})}).catch(()=>{i.value=!0,setTimeout(()=>{i.value=!1},3e3)}):b({...a.value}).then(()=>{r.push({name:"listar-regiones-validas"})}).catch(()=>{i.value=!0,setTimeout(()=>{i.value=!1},3e3)}))};return k(()=>{var c;s.value=(c=r.currentRoute.value.params.id)==null?void 0:c.toString(),s.value?(m.value="Actualizar Región válida por estado",g(s.value).then(t=>{a.value.id=t.id,a.value.id_estado=t.id_estado,a.value.id_nivel_tabulador=t.id_nivel_tabulador,a.value.id_region=t.id_region,u.value=!0})):u.value=!0,D(),S({})}),(c,t)=>(n(),T(N,{name:"view"},{default:C(()=>[u.value?(n(),d("div",A,[e("h4",P,p(m.value),1),j,e("form",G,[e("div",I,[H,v(e("select",{class:"form-select form-control","onUpdate:modelValue":t[0]||(t[0]=o=>a.value.id_estado=o)},O,512),[[_,a.value.id_estado]])]),e("div",Q,[W,v(e("select",{class:"form-select form-control","onUpdate:modelValue":t[1]||(t[1]=o=>a.value.id_nivel_tabulador=o)},[X,(n(!0),d(x,null,F(q(y).data,o=>(n(),d("option",{key:o.id,value:o.id},p("Nivel "+o.clave),9,Y))),128))],512),[[_,a.value.id_nivel_tabulador]])]),e("div",Z,[$,v(e("select",{class:"form-select form-control","onUpdate:modelValue":t[2]||(t[2]=o=>a.value.id_region=o)},te,512),[[_,a.value.id_region]])]),e("div",{class:"modal-footer"},[e("button",{type:"button",class:"btn btn-secondary",onClick:R}," Cancelar "),e("button",{type:"button",onClick:w,class:"btn btn-primary"}," Guardar ")]),i.value?(n(),d("small",oe," Verifique que los datos esten correctos, o no haya sido registrado previamiente. ")):f("",!0)])])):f("",!0)]),_:1}))}});export{_e as default};
