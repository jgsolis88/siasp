import{d as L,r as c,m as A,y as v,q as T,w as q,T as N,o as r,c as u,b as e,t as h,g,i as y,u as i,k as d}from"./index-1b3fb38e.js";import{s as B}from"./scrollHelper-62f64ba1.js";import{a as D}from"./useLevelsArea-0caeb9b3.js";import{d as z}from"./levelAreaModel-2c06ec7c.js";import{u as I}from"./useFormValidation-fd822eea.js";import"./api-fdc0db9b.js";import"./paginationHelper-8171a740.js";const M={clave:{rules:[{validation:a=>a&&a.length>0,message:"La clave es requerida."}]},descripcion:{rules:[{validation:a=>a&&a.length>0,message:"La descripción es requerida."},{validation:a=>a&&a.length>3,message:"La descripción debe tener al menos tres caracteres."}]}},S={key:0},F={class:"view-name"},R=e("hr",{class:"red"},null,-1),U={class:"p-4"},E={key:0,class:"form-group"},G=e("label",{for:"clave"},"Clave",-1),j={key:0,id:"clave-small",class:"form-text text-muted app-validation"},H={class:"form-group"},J=e("label",{for:"descripcion-nivel"},"Descripción",-1),K={key:0,id:"descripcion-nivel-small",class:"form-text text-muted app-validation"},O={key:1,class:"form-text text-muted app-form-message"},ee=L({__name:"LevelsAreaDetailsView",setup(a){const _=c("Registrar Nivel por Área"),{updateLevelsArea:b,getLevelArea:x,saveLevelsArea:k}=D(),l=c(""),m=c(!1),n=c(!1),t=c({...z}),{isValid:V,errors:o}=I(t.value,M),w=()=>{v.push({name:"listar-niveles-area"})},C=()=>{V.value&&(l.value?b(l.value,{...t.value}).then(()=>{v.push({name:"listar-niveles-area"})}).catch(()=>{n.value=!0,setTimeout(()=>{n.value=!1},3e3)}):k({...t.value}).then(()=>{v.push({name:"listar-niveles-area"})}).catch(()=>{n.value=!0,setTimeout(()=>{n.value=!1},3e3)}))};return A(()=>{var p;l.value=(p=v.currentRoute.value.params.id)==null?void 0:p.toString(),l.value?(_.value="Actualizar Nivel por Área",x(l.value).then(s=>{t.value.clave=s.clave,t.value.descripcion=s.descripcion,m.value=!0})):m.value=!0,B()}),(p,s)=>(r(),T(N,{name:"view"},{default:q(()=>[m.value?(r(),u("div",S,[e("h4",F,h(_.value),1),R,e("form",U,[l.value?d("",!0):(r(),u("div",E,[G,g(e("input",{type:"text","onUpdate:modelValue":s[0]||(s[0]=f=>t.value.clave=f),class:"form-control",id:"clave",placeholder:"Introduzca la clave",autocomplete:"off"},null,512),[[y,t.value.clave]]),i(o)&&i(o).clave?(r(),u("small",j,h(i(o).clave),1)):d("",!0)])),e("div",H,[J,g(e("input",{type:"text","onUpdate:modelValue":s[1]||(s[1]=f=>t.value.descripcion=f),class:"form-control",id:"descripcion-nivel",placeholder:"Introduzca la descripción del nivel",autocomplete:"off"},null,512),[[y,t.value.descripcion]]),i(o)&&i(o).descripcion?(r(),u("small",K,h(i(o).descripcion),1)):d("",!0)]),e("div",{class:"modal-footer"},[e("button",{type:"button",class:"btn btn-secondary",onClick:w}," Cancelar "),e("button",{type:"button",onClick:C,class:"btn btn-primary"}," Guardar ")]),n.value?(r(),u("small",O," Verifique que los datos esten correctos, o no haya sido registrado previamiente. ")):d("",!0)])])):d("",!0)]),_:1}))}});export{ee as default};
