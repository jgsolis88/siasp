import{d as S,r as d,i as C,q as v,j as T,w as L,T as N,o as s,c as n,b as e,t as m,g as f,n as b,u as o,k as c,z as B}from"./index-9519387c.js";import{s as j}from"./scrollHelper-62f64ba1.js";import{u as z}from"./useScalesLevel-fe2293d5.js";import{u as D}from"./useFormValidation-a830d579.js";import{d as I}from"./scaleLevelModel-87d2312d.js";import"./api-e3d8e98d.js";import"./paginationHelper-8171a740.js";const M={},q={key:0},E={class:"view-name"},U=e("hr",{class:"red"},null,-1),F={class:"p-4"},P={key:0,class:"form-group"},R=e("label",{for:"clave-functional-job"},"Clave",-1),A={key:0,id:"clave-nivel-small",class:"form-text text-muted app-validation"},G={class:"form-group"},H=e("label",{for:"nombre-operacion"},"Descripción",-1),J={key:0,id:"descripcion-nivel-small",class:"form-text text-muted app-validation"},K={class:"form-group"},O=e("label",null,"Nivel Tabulador",-1),Q=e("option",{value:"0"},"Seleccione una opción",-1),W=[Q],X={key:0,id:"name-nivel-small",class:"form-text text-muted app-validation"},Y={key:1,class:"form-text text-muted app-form-message"},ie=S({__name:"ScaleLevelDetailsView",setup(Z){const h=d("Registrar Escala Por Nivel"),{saveScaleLevel:y,updateScaleLevel:x,getScaleLevelById:k}=z(),i=d(""),p=d(!1),r=d(!1),a=d({...I}),{isValid:V,errors:t}=D(a.value,M),g=()=>{v.push({name:"listar-escalas-nivel"})},w=()=>{V.value&&(i.value?x(i.value,{...a.value}).then(()=>{v.push({name:"listar-escalas-nivel"})}).catch(()=>{r.value=!0,setTimeout(()=>{r.value=!1},3e3)}):(a.value.id_nivel_tabulador=1,y({...a.value}).then(()=>{v.push({name:"listar-escalas-nivel"})}).catch(()=>{r.value=!0,setTimeout(()=>{r.value=!1},3e3)})))};return C(()=>{var _;i.value=(_=v.currentRoute.value.params.id)==null?void 0:_.toString(),i.value?(h.value="Actualizar Escala Por Nivel",k(i.value).then(l=>{a.value.clave=l.clave,a.value.descripcion=l.descripcion,a.value.id_nivel_tabulador=l.id_nivel_tabulador,p.value=!0})):p.value=!0,j()}),(_,l)=>(s(),T(N,{name:"view"},{default:L(()=>[p.value?(s(),n("div",q,[e("h4",E,m(h.value),1),U,e("form",F,[i.value?c("",!0):(s(),n("div",P,[R,f(e("input",{type:"text","onUpdate:modelValue":l[0]||(l[0]=u=>a.value.clave=u),class:"form-control",id:"clave-functional-job",placeholder:"Introduzca la clave",autocomplete:"off"},null,512),[[b,a.value.clave]]),o(t)&&o(t).clave?(s(),n("small",A,m(o(t).clave),1)):c("",!0)])),e("div",G,[H,f(e("input",{type:"text","onUpdate:modelValue":l[1]||(l[1]=u=>a.value.descripcion=u),class:"form-control",id:"description-functional-job",placeholder:"Introduzca la descripción",autocomplete:"off"},null,512),[[b,a.value.descripcion]]),o(t)&&o(t).descripcion?(s(),n("small",J,m(o(t).descripcion),1)):c("",!0)]),e("div",K,[O,f(e("select",{class:"form-select form-control","onUpdate:modelValue":l[2]||(l[2]=u=>a.value.id_nivel_tabulador=u)},W,512),[[B,a.value.id_nivel_tabulador]]),o(t)&&o(t).escala?(s(),n("small",X,m(o(t).escala),1)):c("",!0)]),e("div",{class:"modal-footer"},[e("button",{type:"button",class:"btn btn-secondary",onClick:g}," Cancelar "),e("button",{type:"button",onClick:w,class:"btn btn-primary"}," Guardar ")]),r.value?(s(),n("small",Y," Verifique que los datos esten correctos, o no haya sido registrado previamiente. ")):c("",!0)])])):c("",!0)]),_:1}))}});export{ie as default};
